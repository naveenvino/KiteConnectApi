Using launch settings from C:\Users\E1791\KiteApp\Kite\Properties\launchSettings.json...
[15:38:44 DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
[15:38:45 DBG] The property 'RiskParameters.StrategyConfigId' was created in shadow state because there are no eligible CLR members with a matching name.
[15:38:45 WRN] No store type was specified for the decimal property 'HedgePercentage' on entity type 'HedgeConfiguration'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'HedgeRatio' on entity type 'HedgeConfiguration'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'AllocatedMargin' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'EntryLimitPrice' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'ExitAndReenterProfitAmount' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'ExitAndReenterProfitPercentage' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'HedgePremiumPercentage' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'HedgeRatio' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'LockProfitAmount' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'LockProfitPercentage' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MaxDailyLoss' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MaxPositionSize' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MoveStopLossToEntryPriceAmount' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MoveStopLossToEntryPricePercentage' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'OverallPositionStopLoss' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'StopLossPercentage' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TakeProfitPercentage' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TargetPercentage' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TrailStopLossAmount' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TrailStopLossPercentage' on entity type 'NiftyOptionStrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'LockedProfitLevel' on entity type 'OptionsTradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MaxLoss' on entity type 'OptionsTradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MaxProfit' on entity type 'OptionsTradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'PnLPercentage' on entity type 'OptionsTradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'StopLossPrice' on entity type 'OptionsTradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TargetPrice' on entity type 'OptionsTradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TrailingStopLoss' on entity type 'OptionsTradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'LimitPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TriggerPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'ActionAmount' on entity type 'RiskManagementRule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'ActionPercentage' on entity type 'RiskManagementRule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TriggerAmount' on entity type 'RiskManagementRule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'TriggerPercentage' on entity type 'RiskManagementRule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MaxExposure' on entity type 'RiskParameters'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MaxLoss' on entity type 'RiskParameters'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MaxProfit' on entity type 'RiskParameters'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ScreenerCriteria'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ScreenerCriteria'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'AllocatedCapital' on entity type 'StrategyConfig'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'AveragePrice' on entity type 'TradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'PnL' on entity type 'TradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'Realised' on entity type 'TradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 WRN] No store type was specified for the decimal property 'Unrealised' on entity type 'TradePosition'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[15:38:45 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:38:45 DBG] Creating DbConnection.
[15:38:45 DBG] Created DbConnection. (28ms).
[15:38:45 DBG] Migrating using database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 DBG] Creating DbCommand for 'ExecuteNonQuery'.
[15:38:45 DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
[15:38:45 DBG] Initialized DbCommand for 'ExecuteNonQuery' (5ms).
[15:38:45 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
[15:38:45 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
[15:38:45 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (2ms).
[15:38:45 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
[15:38:45 DBG] Creating DbCommand for 'ExecuteScalar'.
[15:38:45 DBG] Created DbCommand for 'ExecuteScalar' (0ms).
[15:38:45 DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
[15:38:45 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
[15:38:45 INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
[15:38:45 DBG] Beginning transaction with isolation level 'Unspecified'.
[15:38:45 DBG] Began transaction with isolation level 'ReadCommitted'.
[15:38:45 DBG] Creating DbCommand for 'ExecuteNonQuery'.
[15:38:45 DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
[15:38:45 DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
[15:38:45 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
[15:38:45 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
[15:38:45 DBG] Committing transaction.
[15:38:45 DBG] Committed transaction.
[15:38:45 DBG] Disposing transaction.
[15:38:45 DBG] Beginning transaction with isolation level 'Unspecified'.
[15:38:45 DBG] Began transaction with isolation level 'ReadCommitted'.
[15:38:45 DBG] Creating DbCommand for 'ExecuteNonQuery'.
[15:38:45 DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
[15:38:45 DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
[15:38:45 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
[15:38:45 INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
[15:38:45 DBG] Creating DbCommand for 'ExecuteScalar'.
[15:38:45 DBG] Created DbCommand for 'ExecuteScalar' (0ms).
[15:38:45 DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
[15:38:45 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[15:38:45 INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[15:38:45 DBG] Creating DbCommand for 'ExecuteReader'.
[15:38:45 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:38:45 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:38:45 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[15:38:45 INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[15:38:45 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
[15:38:45 INF] No migrations were applied. The database is already up to date.
[15:38:45 DBG] Committing transaction.
[15:38:45 DBG] Committed transaction.
[15:38:45 DBG] Creating DbCommand for 'ExecuteScalar'.
[15:38:45 DBG] Created DbCommand for 'ExecuteScalar' (0ms).
[15:38:45 DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
[15:38:45 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
[15:38:45 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
[15:38:45 DBG] Disposing transaction.
[15:38:45 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:38:45 DBG] 'ApplicationDbContext' disposed.
[15:38:45 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:38:45 DBG] Disposed connection to database '' on server '' (0ms).
[15:38:45 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[15:38:46 DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
[15:38:46 DBG] Hosting starting
[15:38:46 DBG] Starting VirtualBucketsRingProvider on silo S127.0.0.1:11111:111751726/x31CE7F16.
[15:38:46 INF] Silo starting with GC settings: ServerGC=True GCLatencyMode=Interactive
[15:38:46 WRN] A verbose logging level (Debug) is configured. This will impact performance. The recommended log level is Information.
[15:38:46 INF] -------------- Initializing silo on host E1791-NAVEEN MachineName E1791-NAVEEN at 127.0.0.1:11111, gen 111751726 --------------
[15:38:46 INF] Starting silo Silo_3beea
[15:38:46 DBG] Created ActivationTaskScheduler-1:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.catalog/127.0.0.1:11111@111751726@035e1f7900000000e330d0d100000000]
[15:38:46 DBG] Created ActivationTaskScheduler-2:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.dir.mem/127.0.0.1:11111@111751726@5b2008b900000000e330d0d100000000]
[15:38:46 DBG] Created ActivationTaskScheduler-3:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.dir.cache-validator/127.0.0.1:11111@111751726@95f59abd00000000e330d0d100000000]
[15:38:46 DBG] Processing silo add event for S127.0.0.1:11111:111751726
[15:38:46 DBG] S127.0.0.1:11111:111751726 is not my immediate successor.
[15:38:46 DBG] Silo S127.0.0.1:11111:111751726 added silo S127.0.0.1:11111:111751726
[15:38:46 DBG] Created ActivationTaskScheduler-4:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.load-publisher/127.0.0.1:11111@111751726@f4b42ed600000000e330d0d100000000]
[15:38:46 DBG] Created ActivationTaskScheduler-5:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.clustering/127.0.0.1:11111@111751726@77f9af2100000000e330d0d100000000]
[15:38:46 DBG] Created ActivationTaskScheduler-6:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.dir.client/127.0.0.1:11111@111751726@48daa28200000000e330d0d100000000]
[15:38:46 DBG] Created ActivationTaskScheduler-7:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.migrator/127.0.0.1:11111@111751726@e8f4d5ad00000000e330d0d100000000]
[15:38:46 INF] GrainBasedMembershipTable Activated.
[15:38:46 DBG] Created ActivationTaskScheduler-8:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.clustering.dev/127.0.0.1:11111@0@10377f2c000000009ce29bc900000000]
[15:38:46 DBG] Monitoring cluster membership updates
[15:38:46 INF] -------------- Started silo S127.0.0.1:11111:111751726, ConsistentHashCode 31CE7F16 --------------
[15:38:46 INF] Start installing Hangfire SQL objects...
[15:38:56 WRN] An exception occurred while trying to perform the migration. Retrying...
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerStorage.UseConnection(DbConnection dedicatedConnection, Action`2 action) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 268
   at Hangfire.SqlServer.SqlServerStorage.Initialize() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 465
ClientConnectionId:d3a5b80c-284c-4360-85f4-1cfce022702b
Error Number:4060,State:1,Class:11
[15:38:56 WRN] An exception occurred while trying to perform the migration. Retrying...
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerStorage.UseConnection(DbConnection dedicatedConnection, Action`2 action) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 268
   at Hangfire.SqlServer.SqlServerStorage.Initialize() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 465
ClientConnectionId:d3a5b80c-284c-4360-85f4-1cfce022702b
Error Number:4060,State:1,Class:11
[15:38:56 WRN] An exception occurred while trying to perform the migration.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerStorage.UseConnection(DbConnection dedicatedConnection, Action`2 action) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 268
   at Hangfire.SqlServer.SqlServerStorage.Initialize() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 465
ClientConnectionId:d3a5b80c-284c-4360-85f4-1cfce022702b
Error Number:4060,State:1,Class:11
[15:38:56 WRN] Was unable to perform the Hangfire schema migration due to an exception. Ignore this message unless you've just installed or upgraded Hangfire.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerStorage.UseConnection(DbConnection dedicatedConnection, Action`2 action) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 268
   at Hangfire.SqlServer.SqlServerStorage.Initialize() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 465
ClientConnectionId:d3a5b80c-284c-4360-85f4-1cfce022702b
Error Number:4060,State:1,Class:11
[15:38:56 ERR] Was unable to use the TryAutoDetectSchemaDependentOptions option due to an exception.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TResult](DbConnection dedicatedConnection, Func`3 action) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 279
   at Hangfire.SqlServer.SqlServerStorage.Initialize() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 495
ClientConnectionId:d3a5b80c-284c-4360-85f4-1cfce022702b
Error Number:4060,State:1,Class:11
[15:38:56 INF] ExpirySquareOffService started
[15:38:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:38:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:38:56 DBG] 'ApplicationDbContext' disposed.
[15:38:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:38:56 INF] Starting Orleans Silo.
[15:38:56 DBG] Created ActivationTaskScheduler-9:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.lifecycle/127.0.0.1:11111@111751726@f65d6c1900000000e330d0d100000000]
[15:38:56 DBG] Stage First (-2147483648): Orleans.Runtime.SiloOptionsLogger
[15:38:56 DBG] Stage 1999: ConnectionManager, SiloConnectionListener, GatewayConnectionListener
[15:38:56 DBG] Stage RuntimeInitialize (2000): Orleans.Runtime.InsideRuntimeClient, SiloStatusListenerManager, ClusterMembershipService, SiloConnectionMaintainer, Orleans.Runtime.Silo
[15:38:56 DBG] Stage 2001: MembershipAgent
[15:38:56 DBG] Stage RuntimeServices (4000): ActivationCollector, Orleans.Runtime.GrainDirectory.LocalGrainDirectory, ClusterManifestProvider, Orleans.Runtime.Silo
[15:38:56 DBG] Stage RuntimeGrainServices (8000): CachedGrainLocator, DeploymentLoadPublisher, MembershipTableManager, ClientDirectory, ClusterManifestProvider, HostedClient, ActivationMigrationManager, Orleans.Runtime.Silo
[15:38:56 DBG] Stage AfterRuntimeGrainServices (8100): MembershipAgent, SiloStatusListenerManager
[15:38:56 DBG] Stage ApplicationServices (10000): Orleans.Runtime.Versions.GrainVersionStore
[15:38:56 DBG] Stage BecomeActive (19999): ActivationWorkingSet, MembershipAgent, IncomingRequestMonitor, Orleans.Runtime.Silo
[15:38:56 DBG] Stage Active (20000): ClusterHealthMonitor, Orleans.Runtime.MembershipService.LocalSiloHealthMonitor, MembershipTableCleanupAgent, GatewayConnectionListener, Orleans.Runtime.Silo
[15:38:56 INF] Configuration Orleans.Configuration.ActivationCountBasedPlacementOptions: 
ChooseOutOf: 2

[15:38:56 INF] Configuration Orleans.Configuration.ClusterMembershipOptions: 
NumMissedTableIAmAliveLimit: 3
LivenessEnabled: True
ProbeTimeout: 00:00:05
TableRefreshTimeout: 00:01:00
DeathVoteExpirationTimeout: 00:02:00
IAmAliveTablePublishTimeout: 00:00:30
MaxJoinAttemptTime: 00:05:00
UseLivenessGossip: True
NumProbedSilos: 10
NumMissedProbesLimit: 3
NumVotesForDeathDeclaration: 2
DefunctSiloExpiration: 7.00:00:00
DefunctSiloCleanupPeriod: 01:00:00
LocalHealthDegradationMonitoringPeriod: 00:00:10
ExtendProbeTimeoutDuringDegradation: True
EnableIndirectProbes: True
EvictWhenMaxJoinAttemptTimeExceeded: True

[15:38:56 INF] Configuration Orleans.Configuration.ClusterOptions: 
ClusterId: default
ServiceId: default

[15:38:56 INF] Configuration Orleans.Configuration.ConnectionOptions: 
ProtocolVersion: Version1
ConnectionsPerEndpoint: 1
ConnectionRetryDelay: 00:00:01
OpenConnectionTimeout: 00:00:05

[15:38:56 INF] Configuration Orleans.Configuration.ConsistentRingOptions: 
NumVirtualBucketsConsistentRing: 30
UseVirtualBucketsConsistentRing: True

[15:38:56 INF] Configuration Orleans.Configuration.DevelopmentClusterMembershipOptions: 
PrimarySiloEndpoint: 127.0.0.1:11111

[15:38:56 INF] Configuration Orleans.Configuration.EndpointOptions: 
AdvertisedIPAddress: 127.0.0.1
SiloPort: 11111
GatewayPort: 30000
SiloListeningEndpoint: 
GatewayListeningEndpoint: 

[15:38:56 INF] Configuration Orleans.Configuration.GrainCollectionOptions: 
CollectionQuantum: 00:01:00
CollectionAge: 00:15:00
ActivationTimeout: 00:00:30
DeactivationTimeout: 00:00:30

[15:38:56 INF] Configuration Orleans.Configuration.GrainDirectoryOptions: 
CachingStrategy: Adaptive
CacheSize: 1000000
InitialCacheTTL: 00:00:30
MaximumCacheTTL: 00:04:00
CacheTTLExtensionFactor: 2
LazyDeregistrationDelay: 00:01:00

[15:38:56 INF] Configuration Orleans.Configuration.GrainVersioningOptions: 
DefaultCompatibilityStrategy: BackwardCompatible
DefaultVersionSelectorStrategy: AllCompatibleVersions

[15:38:56 INF] Configuration Orleans.Configuration.LoadSheddingOptions: 
LoadSheddingEnabled: False
CpuThreshold: 95
MemoryThreshold: 90

[15:38:56 INF] Configuration Orleans.Configuration.MemoryGrainStorageOptions-PubSubStore: 
NumStorageGrains: 10
InitStage: 10000
GrainStorageSerializer: Orleans.Storage.JsonGrainStorageSerializer

[15:38:56 INF] Configuration Orleans.Configuration.ResourceOptimizedPlacementOptions: 
CpuUsageWeight: 40
MemoryUsageWeight: 20
AvailableMemoryWeight: 20
MaxAvailableMemoryWeight: 5
ActivationCountWeight: 15
LocalSiloPreferenceMargin: 5

[15:38:56 INF] Configuration Orleans.Configuration.SchedulingOptions: 
DelayWarningThreshold: 00:00:10
ActivationSchedulingQuantum: 00:00:00.1000000
TurnWarningLengthThreshold: 00:00:01
MaxPendingWorkItemsSoftLimit: 0
StoppedActivationWarningInterval: 00:01:00

[15:38:56 INF] Configuration Orleans.Configuration.SiloMessagingOptions: 
SiloSenderQueues: 0
GatewaySenderQueues: 0
MaxForwardCount: 2
ClientDropTimeout: 00:01:00
ClientRegistrationRefresh: 00:05:00
ClientGatewayShutdownNotificationTimeout: 00:00:05
MaxEnqueuedRequestsSoftLimit: 0
MaxEnqueuedRequestsHardLimit: 0
MaxEnqueuedRequestsSoftLimit_StatelessWorker: 0
MaxEnqueuedRequestsHardLimit_StatelessWorker: 0
MaxRequestProcessingTime: 02:00:00
AssumeHomogenousSilosForTesting: False
ShutdownRerouteTimeout: 00:00:10
SystemResponseTimeout: 00:00:30
GrainWorkloadAnalysisPeriod: 00:00:05
RequestProcessingWarningTime: 00:00:05
RequestQueueDelayWarningTime: 00:00:10
WaitForMessageToBeQueuedForOutboundTime: 00:00:02
ResponseTimeout: 00:00:30
ResponseTimeoutWithDebugger: 00:30:00
DropExpiredMessages: True
MaxMessageHeaderSize: 10485760
MaxMessageBodySize: 104857600

[15:38:56 INF] Configuration Orleans.Configuration.SiloOptions: 
SiloName: Silo_3beea

[15:38:56 DBG] 'Orleans.Runtime.SiloOptionsLogger' started in stage 'First (-2147483648)' in '00:00:00.0086974'.
[15:38:56 DBG] Starting lifecycle stage 'First (-2147483648)' took '00:00:00.0095119'
[15:38:56 DBG] 'ConnectionManager' started in stage '1999' in '00:00:00.0000141'.
[15:38:56 DBG] 'GatewayConnectionListener' started in stage '1999' in '00:00:00.0021499'.
[15:38:56 DBG] 'SiloConnectionListener' started in stage '1999' in '00:00:00.0028974'.
[15:38:56 DBG] Starting lifecycle stage '1999' took '00:00:00.0031861'
[15:38:56 INF] Start InsideRuntimeClient took 0.0123 milliseconds
[15:38:56 DBG] 'Orleans.Runtime.InsideRuntimeClient' started in stage 'RuntimeInitialize (2000)' in '00:00:00.0013340'.
[15:38:56 DBG] 'SiloStatusListenerManager' started in stage 'RuntimeInitialize (2000)' in '00:00:00.0000402'.
[15:38:56 DBG] 'ClusterMembershipService' started in stage 'RuntimeInitialize (2000)' in '00:00:00.0000540'.
[15:38:56 DBG] 'SiloConnectionMaintainer' started in stage 'RuntimeInitialize (2000)' in '00:00:00.0000623'.
[15:38:56 INF] Silo Start()
[15:38:56 DBG] 'Orleans.Runtime.Silo' started in stage 'RuntimeInitialize (2000)' in '00:00:00.0003833'.
[15:38:56 DBG] Starting lifecycle stage 'RuntimeInitialize (2000)' took '00:00:00.0020687'
[15:38:56 DBG] 'MembershipAgent' started in stage '2001' in '00:00:00.0000228'.
[15:38:56 DBG] Starting lifecycle stage '2001' took '00:00:00.0000461'
[15:38:56 DBG] Starting to process membership updates
[15:38:56 DBG] 'ActivationCollector' started in stage 'RuntimeServices (4000)' in '00:00:00.0007069'.
[15:38:56 DBG] Start
[15:38:56 DBG] Created ActivationTaskScheduler-10:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.manifest/127.0.0.1:11111@111751726@f718d9af00000000e330d0d100000000]
[15:38:56 DBG] 'ClusterManifestProvider' started in stage 'RuntimeServices (4000)' in '00:00:00.0003983'.
[15:38:56 DBG] 'Orleans.Runtime.GrainDirectory.LocalGrainDirectory' started in stage 'RuntimeServices (4000)' in '00:00:00.0005671'.
[15:38:56 DBG] Created ActivationTaskScheduler-11:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.silo-control/127.0.0.1:11111@111751726@1b564fb600000000e330d0d100000000]
[15:38:56 DBG] Created ActivationTaskScheduler-12:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.fallback/127.0.0.1:11111@111751726@79c1494700000000e330d0d100000000]
[15:38:56 DBG] 'Orleans.Runtime.Silo' started in stage 'RuntimeServices (4000)' in '00:00:00.0018199'.
[15:38:56 DBG] Starting lifecycle stage 'RuntimeServices (4000)' took '00:00:00.0031490'
[15:38:56 DBG] 'CachedGrainLocator' started in stage 'RuntimeGrainServices (8000)' in '00:00:00.0012707'.
[15:38:56 DBG] Starting DeploymentLoadPublisher
[15:38:56 DBG] 'ClientDirectory' started in stage 'RuntimeGrainServices (8000)' in '00:00:00.0000747'.
[15:38:56 DBG] 'ClusterManifestProvider' started in stage 'RuntimeGrainServices (8000)' in '00:00:00.0001410'.
[15:38:56 DBG] 'HostedClient' started in stage 'RuntimeGrainServices (8000)' in '00:00:00.0001575'.
[15:38:56 INF] MembershipOracle starting on host E1791-NAVEEN with SiloAddress S127.0.0.1:11111:111751726 at 2025-07-17 10:08:46.058 GMT
[15:38:56 DBG] Starting to process membership updates
[15:38:56 INF] Creating in-memory membership table
[15:38:56 INF] Init grain services took 0 milliseconds to finish
[15:38:56 INF] GrainBasedMembershipTable Activated.
[15:38:56 DBG] Created ActivationTaskScheduler-13:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.clustering.dev/127.0.0.1:11111@0@10377f2c000000009ce29bc900000000]
[15:38:56 DBG] Starting silo watchdog
[15:38:56 DBG] Created ActivationTaskScheduler-14:Queued=0 with GrainContext=[SystemTarget: S127.0.0.1:11111:111751726/sys.svc.clustering.dev/127.0.0.1:11111@0@10377f2c000000009ce29bc900000000]
[15:38:56 DBG] Silo watchdog started successfully.
[15:38:56 DBG] Silo.Start complete: System status = Starting
[15:38:56 DBG] Started DeploymentLoadPublisher
[15:38:56 DBG] 'DeploymentLoadPublisher' started in stage 'RuntimeGrainServices (8000)' in '00:00:00.0082027'.
[15:38:56 DBG] 'ActivationMigrationManager' started in stage 'RuntimeGrainServices (8000)' in '00:00:00.0045419'.
[15:38:56 DBG] 'Orleans.Runtime.Silo' started in stage 'RuntimeGrainServices (8000)' in '00:00:00.0045441'.
[15:38:56 INF] Connected to membership table provider.
[15:38:56 DBG] ProcessTableUpdate (called from Refresh) membership table 0 silos, 0 are Active, 0 are Dead, Version=<0, 0>. All silos: []
[15:38:56 DBG] 'MembershipTableManager' started in stage 'RuntimeGrainServices (8000)' in '00:00:00.0305915'.
[15:38:56 DBG] Starting lifecycle stage 'RuntimeGrainServices (8000)' took '00:00:00.0348980'
[15:38:56 DBG] 'SiloStatusListenerManager' started in stage 'AfterRuntimeGrainServices (8100)' in '00:00:00.0000370'.
[15:38:56 DBG] Starting periodic membership table refreshes
[15:38:56 INF] Joining
[15:38:56 DBG] Starting to process membership updates.
[15:38:56 DBG] Going to try to TryUpdateMyStatusGlobalOnce #0
[15:38:56 DBG] TryUpdateMyStatusGlobalOnce: Read my entry from Membership table 0 silos, 0 are Active, 0 are Dead, Version=<0, 0>. All silos: []
[15:38:56 DBG] InsertRow entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Joining, table version = <1, 0>
[15:38:56 DBG] ProcessTableUpdate (called from TryUpdateMyStatusGlobalOnce) membership table 1 silos, 0 are Active, 0 are Dead, 1 are Joining, Version=<1, 0>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Joining]
[15:38:56 DBG] ProcessTableUpdate (called from TryUpdateMyStatusGlobalOnce) membership table: 1 silos, 0 are Active, 0 are Dead, 1 are Joining, Version=<1, 0>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Joining]
[15:38:56 DBG] Silo S127.0.0.1:11111:111751726 Successfully updated my Status in the membership table to Joining
[15:38:56 DBG] 'MembershipAgent' started in stage 'AfterRuntimeGrainServices (8100)' in '00:00:00.0094834'.
[15:38:56 DBG] Starting lifecycle stage 'AfterRuntimeGrainServices (8100)' took '00:00:00.0095572'
[15:38:56 DBG] 'Orleans.Runtime.Versions.GrainVersionStore' started in stage 'ApplicationServices (10000)' in '00:00:00.0000446'.
[15:38:56 DBG] Starting lifecycle stage 'ApplicationServices (10000)' took '00:00:00.0000702'
[15:38:56 DBG] 'ActivationWorkingSet' started in stage 'BecomeActive (19999)' in '00:00:00.0000621'.
[15:38:56 DBG] 'IncomingRequestMonitor' started in stage 'BecomeActive (19999)' in '00:00:00.0000633'.
[15:38:56 INF] -BecomeActive
[15:38:56 DBG] 'Orleans.Runtime.Silo' started in stage 'BecomeActive (19999)' in '00:00:00.0003670'.
[15:38:56 DBG] Going to try to TryUpdateMyStatusGlobalOnce #0
[15:38:56 DBG] TryUpdateMyStatusGlobalOnce: ReadAll Membership table 1 silos, 0 are Active, 0 are Dead, 1 are Joining, Version=<1, 2>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Joining]
[15:38:56 DBG] UpdateRow entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active, etag = 1, table version = <2, 2>
[15:38:56 DBG] ProcessTableUpdate (called from TryUpdateMyStatusGlobalOnce) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 2>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:38:56 DBG] ProcessTableUpdate (called from TryUpdateMyStatusGlobalOnce) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 2>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:38:56 DBG] Silo S127.0.0.1:11111:111751726 Successfully updated my Status in the membership table to Active
[15:38:56 INF] -Finished BecomeActive.
[15:38:56 DBG] 'MembershipAgent' started in stage 'BecomeActive (19999)' in '00:00:00.0056196'.
[15:38:56 DBG] Starting lifecycle stage 'BecomeActive (19999)' took '00:00:00.0057938'
[15:38:56 DBG] 'ClusterHealthMonitor' started in stage 'Active (20000)' in '00:00:00.0000517'.
[15:38:56 DBG] 'Orleans.Runtime.MembershipService.LocalSiloHealthMonitor' started in stage 'Active (20000)' in '00:00:00.0000394'.
[15:38:56 DBG] 'MembershipTableCleanupAgent' started in stage 'Active (20000)' in '00:00:00.0000439'.
[15:38:56 DBG] 'GatewayConnectionListener' started in stage 'Active (20000)' in '00:00:00.0001392'.
[15:38:56 DBG] Starting periodic membership liveness timestamp updates
[15:38:56 DBG] Starting to process membership updates
[15:38:56 DBG] 'Orleans.Runtime.Silo' started in stage 'Active (20000)' in '00:00:00.0008196'.
[15:38:56 DBG] Starting lifecycle stage 'Active (20000)' took '00:00:00.0011624'
[15:38:56 DBG] Starting membership table cleanup agent
[15:38:56 INF] Orleans Silo started.
[15:38:56 INF] Order Monitoring Service running at: 07/17/2025 15:38:56 +05:30
[15:38:56 DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
[15:38:56 DBG] Wildcard detected, all requests with hosts will be allowed.
[15:38:56 INF] Now listening on: https://localhost:7000
[15:38:56 DBG] Loaded hosting startup assembly KiteConnectApi
[15:38:56 INF] Starting Hangfire Server using job storage: 'SQL Server: (localdb)\mssqllocaldb@HangfireDB'
[15:38:56 INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
[15:38:56 INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
[15:38:56 DBG] Execution loop BackgroundServerProcess:87bee2bd has started in 2.0134 ms
[15:38:56 INF] Application started. Press Ctrl+C to shut down.
[15:38:56 INF] Hosting environment: Development
[15:38:56 INF] Content root path: C:\Users\E1791\KiteApp\Kite
[15:38:56 DBG] Hosting started
[15:38:56 ERR] Execution BackgroundServerProcess is in the Failed state now due to an exception, execution will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:d3a5b80c-284c-4360-85f4-1cfce022702b
Error Number:4060,State:1,Class:11
[15:38:56 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:d3a5b80c-284c-4360-85f4-1cfce022702b
Error Number:4060,State:1,Class:11
[15:38:56 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:39:21 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:00:25.0275040 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:d177d4bb-a445-4414-9825-694783a2ba3a
Error Number:4060,State:1,Class:11
[15:39:21 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:d177d4bb-a445-4414-9825-694783a2ba3a
Error Number:4060,State:1,Class:11
[15:39:21 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:39:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:39:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:39:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:39:46 DBG] Before collection #1: memory: 16MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:39:46 DBG] After collection #1 memory: 16MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0040038
[15:39:46 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:00:50.0444329 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:7bfcc349-00a7-43fc-8e38-22f4433f63fa
Error Number:4060,State:1,Class:11
[15:39:46 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:7bfcc349-00a7-43fc-8e38-22f4433f63fa
Error Number:4060,State:1,Class:11
[15:39:46 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:39:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:39:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:39:56 DBG] 'ApplicationDbContext' disposed.
[15:39:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:39:56 INF] Order Monitoring Service running at: 07/17/2025 15:39:56 +05:30
[15:39:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:39:56 +05:30
[15:39:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:39:56 DBG] Compiling query expression: 
'DbSet<NiftyOptionStrategyConfig>()'
[15:39:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:39:56 DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<NiftyOptionStrategyConfig>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: NiftyOptionStrategyConfig.Id (string) Required PK AfterSave:Throw, 0], [Property: NiftyOptionStrategyConfig.AllocatedMargin (decimal) Required, 1], [Property: NiftyOptionStrategyConfig.AllowMultipleSignals (bool) Required, 2], [Property: NiftyOptionStrategyConfig.AllowedSignals (string), 3], [Property: NiftyOptionStrategyConfig.AutoSquareOffOnExpiry (bool) Required, 4], [Property: NiftyOptionStrategyConfig.CreatedBy (string), 5], [Property: NiftyOptionStrategyConfig.CreatedTime (DateTime) Required, 6], [Property: NiftyOptionStrategyConfig.EntryLimitPrice (decimal?), 7], [Property: NiftyOptionStrategyConfig.EntryOrderType (string), 8], [Property: NiftyOptionStrategyConfig.EntryTime (int) Required, 9], [Property: NiftyOptionStrategyConfig.Exchange (string), 10], [Property: NiftyOptionStrategyConfig.ExecutionMode (string), 11], [Property: NiftyOptionStrategyConfig.ExitAndReenterProfitAmount (decimal) Required, 12], [Property: NiftyOptionStrategyConfig.ExitAndReenterProfitPercentage (decimal) Required, 13], [Property: NiftyOptionStrategyConfig.ExitTime (int) Required, 14], [Property: NiftyOptionStrategyConfig.ExpirySquareOffTimeMinutes (int) Required, 15], [Property: NiftyOptionStrategyConfig.FromDate (DateTime) Required, 16], [Property: NiftyOptionStrategyConfig.HedgeDistancePoints (int) Required, 17], [Property: NiftyOptionStrategyConfig.HedgeEnabled (bool) Required, 18], [Property: NiftyOptionStrategyConfig.HedgePremiumPercentage (decimal) Required, 19], [Property: NiftyOptionStrategyConfig.HedgeRatio (decimal) Required, 20], [Property: NiftyOptionStrategyConfig.HedgeType (string) Required, 21], [Property: NiftyOptionStrategyConfig.InstrumentPrefix (string), 22], [Property: NiftyOptionStrategyConfig.IsDeleted (bool) Required, 23], [Property: NiftyOptionStrategyConfig.IsEnabled (bool) Required, 24], [Property: NiftyOptionStrategyConfig.LastExitReentryTime (DateTime?), 25], [Property: NiftyOptionStrategyConfig.LastUpdated (DateTime) Required, 26], [Property: NiftyOptionStrategyConfig.LastUpdatedBy (string), 27], [Property: NiftyOptionStrategyConfig.LockProfitAmount (decimal) Required, 28], [Property: NiftyOptionStrategyConfig.LockProfitPercentage (decimal) Required, 29], [Property: NiftyOptionStrategyConfig.ManualExecutionTimeoutMinutes (int) Required, 30], [Property: NiftyOptionStrategyConfig.MaxDailyLoss (decimal) Required, 31], [Property: NiftyOptionStrategyConfig.MaxPositionSize (decimal) Required, 32], [Property: NiftyOptionStrategyConfig.MaxTradesPerDay (int) Required, 33], [Property: NiftyOptionStrategyConfig.MinReentryDelayMinutes (int) Required, 34], [Property: NiftyOptionStrategyConfig.MoveStopLossToEntryPriceAmount (decimal) Required, 35], [Property: NiftyOptionStrategyConfig.MoveStopLossToEntryPricePercentage (decimal) Required, 36], [Property: NiftyOptionStrategyConfig.Notes (string), 37], [Property: NiftyOptionStrategyConfig.NotifyOnEntry (bool) Required, 38], [Property: NiftyOptionStrategyConfig.NotifyOnExit (bool) Required, 39], [Property: NiftyOptionStrategyConfig.NotifyOnProfit (bool) Required, 40], [Property: NiftyOptionStrategyConfig.NotifyOnStopLoss (bool) Required, 41], [Property: NiftyOptionStrategyConfig.OrderType (string), 42], [Property: NiftyOptionStrategyConfig.OverallPositionStopLoss (decimal) Required, 43], [Property: NiftyOptionStrategyConfig.ProductType (string), 44], [Property: NiftyOptionStrategyConfig.Quantity (int) Required, 45], [Property: NiftyOptionStrategyConfig.StopLossPercentage (decimal) Required, 46], [Property: NiftyOptionStrategyConfig.StrategyName (string), 47], [Property: NiftyOptionStrategyConfig.TakeProfitPercentage (decimal) Required, 48], [Property: NiftyOptionStrategyConfig.TargetPercentage (decimal) Required, 49], [Property: NiftyOptionStrategyConfig.ToDate (DateTime) Required, 50], [Property: NiftyOptionStrategyConfig.TrailStopLossAmount (decimal) Required, 51], [Property: NiftyOptionStrategyConfig.TrailStopLossPercentage (decimal) Required, 52], [Property: NiftyOptionStrategyConfig.UnderlyingInstrument (string), 53], [Property: NiftyOptionStrategyConfig.UseDynamicQuantity (bool) Required, 54], [Property: NiftyOptionStrategyConfig.UseNearestWeeklyExpiry (bool) Required, 55], [Property: NiftyOptionStrategyConfig.UseOrderProtection (bool) Required, 56] }
        SELECT n.Id, n.AllocatedMargin, n.AllowMultipleSignals, n.AllowedSignals, n.AutoSquareOffOnExpiry, n.CreatedBy, n.CreatedTime, n.EntryLimitPrice, n.EntryOrderType, n.EntryTime, n.Exchange, n.ExecutionMode, n.ExitAndReenterProfitAmount, n.ExitAndReenterProfitPercentage, n.ExitTime, n.ExpirySquareOffTimeMinutes, n.FromDate, n.HedgeDistancePoints, n.HedgeEnabled, n.HedgePremiumPercentage, n.HedgeRatio, n.HedgeType, n.InstrumentPrefix, n.IsDeleted, n.IsEnabled, n.LastExitReentryTime, n.LastUpdated, n.LastUpdatedBy, n.LockProfitAmount, n.LockProfitPercentage, n.ManualExecutionTimeoutMinutes, n.MaxDailyLoss, n.MaxPositionSize, n.MaxTradesPerDay, n.MinReentryDelayMinutes, n.MoveStopLossToEntryPriceAmount, n.MoveStopLossToEntryPricePercentage, n.Notes, n.NotifyOnEntry, n.NotifyOnExit, n.NotifyOnProfit, n.NotifyOnStopLoss, n.OrderType, n.OverallPositionStopLoss, n.ProductType, n.Quantity, n.StopLossPercentage, n.StrategyName, n.TakeProfitPercentage, n.TargetPercentage, n.ToDate, n.TrailStopLossAmount, n.TrailStopLossPercentage, n.UnderlyingInstrument, n.UseDynamicQuantity, n.UseNearestWeeklyExpiry, n.UseOrderProtection
        FROM NiftyOptionStrategyConfigs AS n) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: NiftyOptionStrategyConfig.Id (string) Required PK AfterSave:Throw, 0], [Property: NiftyOptionStrategyConfig.AllocatedMargin (decimal) Required, 1], [Property: NiftyOptionStrategyConfig.AllowMultipleSignals (bool) Required, 2], [Property: NiftyOptionStrategyConfig.AllowedSignals (string), 3], [Property: NiftyOptionStrategyConfig.AutoSquareOffOnExpiry (bool) Required, 4], [Property: NiftyOptionStrategyConfig.CreatedBy (string), 5], [Property: NiftyOptionStrategyConfig.CreatedTime (DateTime) Required, 6], [Property: NiftyOptionStrategyConfig.EntryLimitPrice (decimal?), 7], [Property: NiftyOptionStrategyConfig.EntryOrderType (string), 8], [Property: NiftyOptionStrategyConfig.EntryTime (int) Required, 9], [Property: NiftyOptionStrategyConfig.Exchange (string), 10], [Property: NiftyOptionStrategyConfig.ExecutionMode (string), 11], [Property: NiftyOptionStrategyConfig.ExitAndReenterProfitAmount (decimal) Required, 12], [Property: NiftyOptionStrategyConfig.ExitAndReenterProfitPercentage (decimal) Required, 13], [Property: NiftyOptionStrategyConfig.ExitTime (int) Required, 14], [Property: NiftyOptionStrategyConfig.ExpirySquareOffTimeMinutes (int) Required, 15], [Property: NiftyOptionStrategyConfig.FromDate (DateTime) Required, 16], [Property: NiftyOptionStrategyConfig.HedgeDistancePoints (int) Required, 17], [Property: NiftyOptionStrategyConfig.HedgeEnabled (bool) Required, 18], [Property: NiftyOptionStrategyConfig.HedgePremiumPercentage (decimal) Required, 19], [Property: NiftyOptionStrategyConfig.HedgeRatio (decimal) Required, 20], [Property: NiftyOptionStrategyConfig.HedgeType (string) Required, 21], [Property: NiftyOptionStrategyConfig.InstrumentPrefix (string), 22], [Property: NiftyOptionStrategyConfig.IsDeleted (bool) Required, 23], [Property: NiftyOptionStrategyConfig.IsEnabled (bool) Required, 24], [Property: NiftyOptionStrategyConfig.LastExitReentryTime (DateTime?), 25], [Property: NiftyOptionStrategyConfig.LastUpdated (DateTime) Required, 26], [Property: NiftyOptionStrategyConfig.LastUpdatedBy (string), 27], [Property: NiftyOptionStrategyConfig.LockProfitAmount (decimal) Required, 28], [Property: NiftyOptionStrategyConfig.LockProfitPercentage (decimal) Required, 29], [Property: NiftyOptionStrategyConfig.ManualExecutionTimeoutMinutes (int) Required, 30], [Property: NiftyOptionStrategyConfig.MaxDailyLoss (decimal) Required, 31], [Property: NiftyOptionStrategyConfig.MaxPositionSize (decimal) Required, 32], [Property: NiftyOptionStrategyConfig.MaxTradesPerDay (int) Required, 33], [Property: NiftyOptionStrategyConfig.MinReentryDelayMinutes (int) Required, 34], [Property: NiftyOptionStrategyConfig.MoveStopLossToEntryPriceAmount (decimal) Required, 35], [Property: NiftyOptionStrategyConfig.MoveStopLossToEntryPricePercentage (decimal) Required, 36], [Property: NiftyOptionStrategyConfig.Notes (string), 37], [Property: NiftyOptionStrategyConfig.NotifyOnEntry (bool) Required, 38], [Property: NiftyOptionStrategyConfig.NotifyOnExit (bool) Required, 39], [Property: NiftyOptionStrategyConfig.NotifyOnProfit (bool) Required, 40], [Property: NiftyOptionStrategyConfig.NotifyOnStopLoss (bool) Required, 41], [Property: NiftyOptionStrategyConfig.OrderType (string), 42], [Property: NiftyOptionStrategyConfig.OverallPositionStopLoss (decimal) Required, 43], [Property: NiftyOptionStrategyConfig.ProductType (string), 44], [Property: NiftyOptionStrategyConfig.Quantity (int) Required, 45], [Property: NiftyOptionStrategyConfig.StopLossPercentage (decimal) Required, 46], [Property: NiftyOptionStrategyConfig.StrategyName (string), 47], [Property: NiftyOptionStrategyConfig.TakeProfitPercentage (decimal) Required, 48], [Property: NiftyOptionStrategyConfig.TargetPercentage (decimal) Required, 49], [Property: NiftyOptionStrategyConfig.ToDate (DateTime) Required, 50], [Property: NiftyOptionStrategyConfig.TrailStopLossAmount (decimal) Required, 51], [Property: NiftyOptionStrategyConfig.TrailStopLossPercentage (decimal) Required, 52], [Property: NiftyOptionStrategyConfig.UnderlyingInstrument (string), 53], [Property: NiftyOptionStrategyConfig.UseDynamicQuantity (bool) Required, 54], [Property: NiftyOptionStrategyConfig.UseNearestWeeklyExpiry (bool) Required, 55], [Property: NiftyOptionStrategyConfig.UseOrderProtection (bool) Required, 56] }
        SELECT n.Id, n.AllocatedMargin, n.AllowMultipleSignals, n.AllowedSignals, n.AutoSquareOffOnExpiry, n.CreatedBy, n.CreatedTime, n.EntryLimitPrice, n.EntryOrderType, n.EntryTime, n.Exchange, n.ExecutionMode, n.ExitAndReenterProfitAmount, n.ExitAndReenterProfitPercentage, n.ExitTime, n.ExpirySquareOffTimeMinutes, n.FromDate, n.HedgeDistancePoints, n.HedgeEnabled, n.HedgePremiumPercentage, n.HedgeRatio, n.HedgeType, n.InstrumentPrefix, n.IsDeleted, n.IsEnabled, n.LastExitReentryTime, n.LastUpdated, n.LastUpdatedBy, n.LockProfitAmount, n.LockProfitPercentage, n.ManualExecutionTimeoutMinutes, n.MaxDailyLoss, n.MaxPositionSize, n.MaxTradesPerDay, n.MinReentryDelayMinutes, n.MoveStopLossToEntryPriceAmount, n.MoveStopLossToEntryPricePercentage, n.Notes, n.NotifyOnEntry, n.NotifyOnExit, n.NotifyOnProfit, n.NotifyOnStopLoss, n.OrderType, n.OverallPositionStopLoss, n.ProductType, n.Quantity, n.StopLossPercentage, n.StrategyName, n.TakeProfitPercentage, n.TargetPercentage, n.ToDate, n.TrailStopLossAmount, n.TrailStopLossPercentage, n.UnderlyingInstrument, n.UseDynamicQuantity, n.UseNearestWeeklyExpiry, n.UseOrderProtection
        FROM NiftyOptionStrategyConfigs AS n, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        NiftyOptionStrategyConfig entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            NiftyOptionStrategyConfig instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(NiftyOptionStrategyConfig);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: NiftyOptionStrategyConfig.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.NiftyOptionStrategyConfig").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (NiftyOptionStrategyConfig)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: NiftyOptionStrategyConfig | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.NiftyOptionStrategyConfig")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: NiftyOptionStrategyConfig | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.NiftyOptionStrategyConfig")]: 
                        {
                            return 
                            {
                                NiftyOptionStrategyConfig instance;
                                instance = new NiftyOptionStrategyConfig();
                                instance.<Id>k__BackingField = dataReader.GetString(0);
                                instance.<AllocatedMargin>k__BackingField = dataReader.GetDecimal(1);
                                instance.<AllowMultipleSignals>k__BackingField = dataReader.GetBoolean(2);
                                instance.<AllowedSignals>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<AutoSquareOffOnExpiry>k__BackingField = dataReader.GetBoolean(4);
                                instance.<CreatedBy>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<CreatedTime>k__BackingField = dataReader.GetDateTime(6);
                                instance.<EntryLimitPrice>k__BackingField = dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7);
                                instance.<EntryOrderType>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<EntryTime>k__BackingField = dataReader.GetInt32(9);
                                instance.<Exchange>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<ExecutionMode>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                instance.<ExitAndReenterProfitAmount>k__BackingField = dataReader.GetDecimal(12);
                                instance.<ExitAndReenterProfitPercentage>k__BackingField = dataReader.GetDecimal(13);
                                instance.<ExitTime>k__BackingField = dataReader.GetInt32(14);
                                instance.<ExpirySquareOffTimeMinutes>k__BackingField = dataReader.GetInt32(15);
                                instance.<FromDate>k__BackingField = dataReader.GetDateTime(16);
                                instance.<HedgeDistancePoints>k__BackingField = dataReader.GetInt32(17);
                                instance.<HedgeEnabled>k__BackingField = dataReader.GetBoolean(18);
                                instance.<HedgePremiumPercentage>k__BackingField = dataReader.GetDecimal(19);
                                instance.<HedgeRatio>k__BackingField = dataReader.GetDecimal(20);
                                instance.<HedgeType>k__BackingField = dataReader.GetString(21);
                                instance.<InstrumentPrefix>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(23);
                                instance.<IsEnabled>k__BackingField = dataReader.GetBoolean(24);
                                instance.<LastExitReentryTime>k__BackingField = dataReader.IsDBNull(25) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(25);
                                instance.<LastUpdated>k__BackingField = dataReader.GetDateTime(26);
                                instance.<LastUpdatedBy>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                instance.<LockProfitAmount>k__BackingField = dataReader.GetDecimal(28);
                                instance.<LockProfitPercentage>k__BackingField = dataReader.GetDecimal(29);
                                instance.<ManualExecutionTimeoutMinutes>k__BackingField = dataReader.GetInt32(30);
                                instance.<MaxDailyLoss>k__BackingField = dataReader.GetDecimal(31);
                                instance.<MaxPositionSize>k__BackingField = dataReader.GetDecimal(32);
                                instance.<MaxTradesPerDay>k__BackingField = dataReader.GetInt32(33);
                                instance.<MinReentryDelayMinutes>k__BackingField = dataReader.GetInt32(34);
                                instance.<MoveStopLossToEntryPriceAmount>k__BackingField = dataReader.GetDecimal(35);
                                instance.<MoveStopLossToEntryPricePercentage>k__BackingField = dataReader.GetDecimal(36);
                                instance.<Notes>k__BackingField = dataReader.IsDBNull(37) ? default(string) : dataReader.GetString(37);
                                instance.<NotifyOnEntry>k__BackingField = dataReader.GetBoolean(38);
                                instance.<NotifyOnExit>k__BackingField = dataReader.GetBoolean(39);
                                instance.<NotifyOnProfit>k__BackingField = dataReader.GetBoolean(40);
                                instance.<NotifyOnStopLoss>k__BackingField = dataReader.GetBoolean(41);
                                instance.<OrderType>k__BackingField = dataReader.IsDBNull(42) ? default(string) : dataReader.GetString(42);
                                instance.<OverallPositionStopLoss>k__BackingField = dataReader.GetDecimal(43);
                                instance.<ProductType>k__BackingField = dataReader.IsDBNull(44) ? default(string) : dataReader.GetString(44);
                                instance.<Quantity>k__BackingField = dataReader.GetInt32(45);
                                instance.<StopLossPercentage>k__BackingField = dataReader.GetDecimal(46);
                                instance.<StrategyName>k__BackingField = dataReader.IsDBNull(47) ? default(string) : dataReader.GetString(47);
                                instance.<TakeProfitPercentage>k__BackingField = dataReader.GetDecimal(48);
                                instance.<TargetPercentage>k__BackingField = dataReader.GetDecimal(49);
                                instance.<ToDate>k__BackingField = dataReader.GetDateTime(50);
                                instance.<TrailStopLossAmount>k__BackingField = dataReader.GetDecimal(51);
                                instance.<TrailStopLossPercentage>k__BackingField = dataReader.GetDecimal(52);
                                instance.<UnderlyingInstrument>k__BackingField = dataReader.IsDBNull(53) ? default(string) : dataReader.GetString(53);
                                instance.<UseDynamicQuantity>k__BackingField = dataReader.GetBoolean(54);
                                instance.<UseNearestWeeklyExpiry>k__BackingField = dataReader.GetBoolean(55);
                                instance.<UseOrderProtection>k__BackingField = dataReader.GetBoolean(56);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: NiftyOptionStrategyConfig | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.NiftyOptionStrategyConfig")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(NiftyOptionStrategyConfig)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: KiteConnectApi.Data.ApplicationDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
[15:39:56 DBG] Creating DbConnection.
[15:39:56 DBG] Created DbConnection. (0ms).
[15:39:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:39:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:39:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:39:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:39:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:39:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            f5a8dff2e388f4d724d8cba8fd39a43d
Activity.SpanId:             4a2f55bc9da8cb5c
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:09:56.7008321Z
Activity.Duration:           00:00:00.0070504
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:39:56 INF] Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:39:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:39:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 4ms reading results.
[15:39:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:39:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:39:56 DBG] 'ApplicationDbContext' disposed.
[15:39:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:39:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:40:01 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:01:05.0570648 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:7bfcc349-00a7-43fc-8e38-22f4433f63fa
Error Number:4060,State:1,Class:11
[15:40:01 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:7bfcc349-00a7-43fc-8e38-22f4433f63fa
Error Number:4060,State:1,Class:11
[15:40:01 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:40:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:40:26 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:01:30.0758862 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:734016f0-fdbf-4a50-a692-ee0c97815cb1
Error Number:4060,State:1,Class:11
[15:40:26 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:734016f0-fdbf-4a50-a692-ee0c97815cb1
Error Number:4060,State:1,Class:11
[15:40:26 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:40:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:40:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:40:41 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:01:45.0909823 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:734016f0-fdbf-4a50-a692-ee0c97815cb1
Error Number:4060,State:1,Class:11
[15:40:41 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:734016f0-fdbf-4a50-a692-ee0c97815cb1
Error Number:4060,State:1,Class:11
[15:40:41 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:40:46 DBG] Before collection #2: memory: 22MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:40:46 DBG] After collection #2 memory: 22MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0004335
[15:40:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:40:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:40:56 DBG] 'ApplicationDbContext' disposed.
[15:40:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:40:56 INF] Order Monitoring Service running at: 07/17/2025 15:40:56 +05:30
[15:40:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:40:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:40:56 +05:30
[15:40:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:40:56 DBG] Creating DbConnection.
[15:40:56 DBG] Created DbConnection. (0ms).
[15:40:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:40:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:40:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:40:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:40:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:40:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            c0f9040e0fa1612c72b673b595e85e37
Activity.SpanId:             a69684b9c32cc8c1
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:10:56.7282193Z
Activity.Duration:           00:00:00.0060094
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:40:56 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:40:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:40:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:40:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:40:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:40:56 DBG] 'ApplicationDbContext' disposed.
[15:40:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:40:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:40:56 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:02:00.1075229 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:734016f0-fdbf-4a50-a692-ee0c97815cb1
Error Number:4060,State:1,Class:11
[15:40:56 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:734016f0-fdbf-4a50-a692-ee0c97815cb1
Error Number:4060,State:1,Class:11
[15:40:56 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:41:11 DBG] Connection id "0HNE5390KP7L4" accepted.
[15:41:11 DBG] Connection id "0HNE5390KP7L4" started.
[15:41:11 DBG] Connection 0HNE5390KP7L4 established using the following protocol: Tls13
[15:41:11 INF] Request starting HTTP/1.1 POST https://localhost:7000/api/HistoricalBacktesting/run - application/json 339
[15:41:11 DBG] POST requests are not supported
[15:41:11 DBG] 1 candidate(s) found for the request path '/api/HistoricalBacktesting/run'
[15:41:11 DBG] Endpoint 'KiteConnectApi.Controllers.HistoricalBacktestingController.RunBacktestAsync (KiteConnectApi)' with route pattern 'api/HistoricalBacktesting/run' is valid for the request path '/api/HistoricalBacktesting/run'
[15:41:11 DBG] Request matched endpoint 'KiteConnectApi.Controllers.HistoricalBacktestingController.RunBacktestAsync (KiteConnectApi)'
[15:41:11 INF] Executing endpoint 'KiteConnectApi.Controllers.HistoricalBacktestingController.RunBacktestAsync (KiteConnectApi)'
[15:41:11 INF] Route matched with {action = "RunBacktest", controller = "HistoricalBacktesting"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[KiteConnectApi.Services.BacktestResult]] RunBacktestAsync(KiteConnectApi.Services.BacktestParameters) on controller KiteConnectApi.Controllers.HistoricalBacktestingController (KiteConnectApi).
[15:41:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[15:41:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[15:41:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
[15:41:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[15:41:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
[15:41:11 DBG] Executing controller factory for controller KiteConnectApi.Controllers.HistoricalBacktestingController (KiteConnectApi)
[15:41:11 DBG] Executed controller factory for controller KiteConnectApi.Controllers.HistoricalBacktestingController (KiteConnectApi)
[15:41:11 DBG] Attempting to bind parameter 'parameters' of type 'KiteConnectApi.Services.BacktestParameters' ...
[15:41:11 DBG] Attempting to bind parameter 'parameters' of type 'KiteConnectApi.Services.BacktestParameters' using the name '' in request data ...
[15:41:11 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[15:41:11 DBG] Connection id "0HNE5390KP7L4", Request id "0HNE5390KP7L4:00000001": started reading request body.
[15:41:11 DBG] Connection id "0HNE5390KP7L4", Request id "0HNE5390KP7L4:00000001": done reading request body.
[15:41:11 DBG] JSON input formatter succeeded, deserializing to type 'KiteConnectApi.Services.BacktestParameters'
[15:41:11 DBG] Done attempting to bind parameter 'parameters' of type 'KiteConnectApi.Services.BacktestParameters'.
[15:41:11 DBG] Done attempting to bind parameter 'parameters' of type 'KiteConnectApi.Services.BacktestParameters'.
[15:41:11 DBG] Attempting to validate the bound parameter 'parameters' of type 'KiteConnectApi.Services.BacktestParameters' ...
[15:41:11 DBG] Done attempting to validate the bound parameter 'parameters' of type 'KiteConnectApi.Services.BacktestParameters'.
[15:41:11 INF] Executing action method KiteConnectApi.Controllers.HistoricalBacktestingController.RunBacktestAsync (KiteConnectApi) - Validation state: Valid
[15:41:11 INF] Starting historical backtest from 06/24/2024 00:00:00 to 07/15/2024 00:00:00
[15:41:11 INF] Starting backtest from 06/24/2024 00:00:00 to 07/15/2024 00:00:00
[15:41:11 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:41:11 DBG] Compiling query expression: 
'DbSet<ManualTradingViewAlert>()
    .Where(a => a.ReceivedTime >= __parameters_FromDate_0 && a.ReceivedTime <= __parameters_ToDate_1)
    .Where(a => __parameters_SignalTypes_2.Contains(a.Signal))
    .Where(a => __parameters_OptionTypes_3.Contains(a.Type))
    .OrderBy(a => a.ReceivedTime)'
[15:41:11 DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ManualTradingViewAlert>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ManualTradingViewAlert.Id (string) Required PK AfterSave:Throw, 0], [Property: ManualTradingViewAlert.Action (string), 1], [Property: ManualTradingViewAlert.IsExecuted (bool) Required, 2], [Property: ManualTradingViewAlert.ReceivedTime (DateTime) Required, 3], [Property: ManualTradingViewAlert.Signal (string), 4], [Property: ManualTradingViewAlert.StrategyName (string), 5], [Property: ManualTradingViewAlert.Strike (int) Required, 6], [Property: ManualTradingViewAlert.Type (string), 7] }
        SELECT m.Id, m.Action, m.IsExecuted, m.ReceivedTime, m.Signal, m.StrategyName, m.Strike, m.Type
        FROM ManualTradingViewAlerts AS m
        WHERE (((m.ReceivedTime >= @__parameters_FromDate_0) && (m.ReceivedTime <= @__parameters_ToDate_1)) && m.Signal IN (
            SELECT p.value
            FROM OPENJSON(@__parameters_SignalTypes_2) WITH (value nvarchar(max) '') AS p)) && m.Type IN (
            SELECT p0.value
            FROM OPENJSON(@__parameters_OptionTypes_3) WITH (value nvarchar(max) '') AS p0)
        ORDER BY m.ReceivedTime ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ManualTradingViewAlert.Id (string) Required PK AfterSave:Throw, 0], [Property: ManualTradingViewAlert.Action (string), 1], [Property: ManualTradingViewAlert.IsExecuted (bool) Required, 2], [Property: ManualTradingViewAlert.ReceivedTime (DateTime) Required, 3], [Property: ManualTradingViewAlert.Signal (string), 4], [Property: ManualTradingViewAlert.StrategyName (string), 5], [Property: ManualTradingViewAlert.Strike (int) Required, 6], [Property: ManualTradingViewAlert.Type (string), 7] }
        SELECT m.Id, m.Action, m.IsExecuted, m.ReceivedTime, m.Signal, m.StrategyName, m.Strike, m.Type
        FROM ManualTradingViewAlerts AS m
        WHERE (((m.ReceivedTime >= @__parameters_FromDate_0) && (m.ReceivedTime <= @__parameters_ToDate_1)) && m.Signal IN (
            SELECT p.value
            FROM OPENJSON(@__parameters_SignalTypes_2) WITH (value nvarchar(max) '') AS p)) && m.Type IN (
            SELECT p0.value
            FROM OPENJSON(@__parameters_OptionTypes_3) WITH (value nvarchar(max) '') AS p0)
        ORDER BY m.ReceivedTime ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        ManualTradingViewAlert entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            ManualTradingViewAlert instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(ManualTradingViewAlert);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: ManualTradingViewAlert.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.ManualTradingViewAlert").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (ManualTradingViewAlert)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: ManualTradingViewAlert | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.ManualTradingViewAlert")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: ManualTradingViewAlert | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.ManualTradingViewAlert")]: 
                        {
                            return 
                            {
                                ManualTradingViewAlert instance;
                                instance = new ManualTradingViewAlert();
                                instance.<Id>k__BackingField = dataReader.GetString(0);
                                instance.<Action>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<IsExecuted>k__BackingField = dataReader.GetBoolean(2);
                                instance.<ReceivedTime>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Signal>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                instance.<StrategyName>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<Strike>k__BackingField = dataReader.GetInt32(6);
                                instance.<Type>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: ManualTradingViewAlert | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.ManualTradingViewAlert")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(ManualTradingViewAlert)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: KiteConnectApi.Data.ApplicationDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
[15:41:11 DBG] Creating DbConnection.
[15:41:11 DBG] Created DbConnection. (0ms).
[15:41:11 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:11 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:11 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:11 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:11 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[15:41:11 DBG] Executing DbCommand [Parameters=[@__parameters_FromDate_0='?' (DbType = DateTime2), @__parameters_ToDate_1='?' (DbType = DateTime2), @__parameters_SignalTypes_2='?' (Size = 4000), @__parameters_OptionTypes_3='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[Action], [m].[IsExecuted], [m].[ReceivedTime], [m].[Signal], [m].[StrategyName], [m].[Strike], [m].[Type]
FROM [ManualTradingViewAlerts] AS [m]
WHERE [m].[ReceivedTime] >= @__parameters_FromDate_0 AND [m].[ReceivedTime] <= @__parameters_ToDate_1 AND [m].[Signal] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__parameters_SignalTypes_2) WITH ([value] nvarchar(max) '$') AS [p]
) AND [m].[Type] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__parameters_OptionTypes_3) WITH ([value] nvarchar(max) '$') AS [p0]
)
ORDER BY [m].[ReceivedTime]
Activity.TraceId:            d318150e9548dc6403933657c0b3299a
Activity.SpanId:             cb09d5b34e75a4ac
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       1a42d4fa246e80a9
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:11.3873120Z
Activity.Duration:           00:00:00.0188427
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:11 INF] Executed DbCommand (21ms) [Parameters=[@__parameters_FromDate_0='?' (DbType = DateTime2), @__parameters_ToDate_1='?' (DbType = DateTime2), @__parameters_SignalTypes_2='?' (Size = 4000), @__parameters_OptionTypes_3='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[Action], [m].[IsExecuted], [m].[ReceivedTime], [m].[Signal], [m].[StrategyName], [m].[Strike], [m].[Type]
FROM [ManualTradingViewAlerts] AS [m]
WHERE [m].[ReceivedTime] >= @__parameters_FromDate_0 AND [m].[ReceivedTime] <= @__parameters_ToDate_1 AND [m].[Signal] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__parameters_SignalTypes_2) WITH ([value] nvarchar(max) '$') AS [p]
) AND [m].[Type] IN (
    SELECT [p0].[value]
    FROM OPENJSON(@__parameters_OptionTypes_3) WITH ([value] nvarchar(max) '$') AS [p0]
)
ORDER BY [m].[ReceivedTime]
[15:41:11 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:11 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:11 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:11 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:41:11 INF] Found 0 historical signals for backtesting
[15:41:11 INF] Backtest completed. Total trades: 0, Win rate: 0.00 %, Total return: 0.00 %
[15:41:11 INF] Backtest completed. Total trades: 0, Win rate: 0.00 %
[15:41:11 INF] Executed action method KiteConnectApi.Controllers.HistoricalBacktestingController.RunBacktestAsync (KiteConnectApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 87.5007ms.
[15:41:11 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[15:41:11 DBG] No information found on request to perform content negotiation.
[15:41:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[15:41:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[15:41:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[15:41:11 INF] Executing OkObjectResult, writing value of type 'KiteConnectApi.Services.BacktestResult'.
[15:41:11 INF] Executed action KiteConnectApi.Controllers.HistoricalBacktestingController.RunBacktestAsync (KiteConnectApi) in 158.6029ms
[15:41:11 INF] Executed endpoint 'KiteConnectApi.Controllers.HistoricalBacktestingController.RunBacktestAsync (KiteConnectApi)'
[15:41:11 DBG] Connection id "0HNE5390KP7L4" completed keep alive response.
[15:41:11 DBG] 'ApplicationDbContext' disposed.
[15:41:11 DBG] Connection id "0HNE5390KP7L4" received FIN.
[15:41:11 DBG] Connection id "0HNE5390KP7L4" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:41:11 DBG] Connection id "0HNE5390KP7L4" disconnecting.
[15:41:11 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:11 DBG] Disposed connection to database '' on server '' (0ms).
[15:41:11 INF] Request finished HTTP/1.1 POST https://localhost:7000/api/HistoricalBacktesting/run - 200 null application/json; charset=utf-8 206.8647ms
Activity.TraceId:            d318150e9548dc6403933657c0b3299a
Activity.SpanId:             1a42d4fa246e80a9
Activity.TraceFlags:         Recorded
Activity.DisplayName:        POST api/HistoricalBacktesting/run
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:11:11.2339374Z
Activity.Duration:           00:00:00.2103540
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: POST
    url.scheme: https
    url.path: /api/HistoricalBacktesting/run
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    http.route: api/HistoricalBacktesting/run
    http.response.status_code: 200
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:11 DBG] Connection id "0HNE5390KP7L4" stopped.
[15:41:19 DBG] Connection id "0HNE5390KP7L5" accepted.
[15:41:19 DBG] Connection id "0HNE5390KP7L5" started.
[15:41:19 DBG] Connection 0HNE5390KP7L5 established using the following protocol: Tls13
[15:41:19 INF] Request starting HTTP/1.1 GET https://localhost:7000/api/HistoricalBacktesting/quick-analysis - null null
[15:41:19 DBG] The request path /api/HistoricalBacktesting/quick-analysis does not match a supported file type
[15:41:19 DBG] 1 candidate(s) found for the request path '/api/HistoricalBacktesting/quick-analysis'
[15:41:19 DBG] Endpoint 'KiteConnectApi.Controllers.HistoricalBacktestingController.GetQuickAnalysisAsync (KiteConnectApi)' with route pattern 'api/HistoricalBacktesting/quick-analysis' is valid for the request path '/api/HistoricalBacktesting/quick-analysis'
[15:41:19 DBG] Request matched endpoint 'KiteConnectApi.Controllers.HistoricalBacktestingController.GetQuickAnalysisAsync (KiteConnectApi)'
[15:41:19 INF] Executing endpoint 'KiteConnectApi.Controllers.HistoricalBacktestingController.GetQuickAnalysisAsync (KiteConnectApi)'
[15:41:19 INF] Route matched with {action = "GetQuickAnalysis", controller = "HistoricalBacktesting"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[KiteConnectApi.Services.BacktestResult]] GetQuickAnalysisAsync() on controller KiteConnectApi.Controllers.HistoricalBacktestingController (KiteConnectApi).
[15:41:19 DBG] Execution plan of authorization filters (in the following order): ["None"]
[15:41:19 DBG] Execution plan of resource filters (in the following order): ["None"]
[15:41:19 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
[15:41:19 DBG] Execution plan of exception filters (in the following order): ["None"]
[15:41:19 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
[15:41:19 DBG] Executing controller factory for controller KiteConnectApi.Controllers.HistoricalBacktestingController (KiteConnectApi)
[15:41:19 DBG] Executed controller factory for controller KiteConnectApi.Controllers.HistoricalBacktestingController (KiteConnectApi)
[15:41:19 INF] Executing action method KiteConnectApi.Controllers.HistoricalBacktestingController.GetQuickAnalysisAsync (KiteConnectApi) - Validation state: Valid
[15:41:19 INF] Starting backtest from 07/10/2025 10:11:19 to 07/17/2025 10:11:19
[15:41:19 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:41:19 DBG] Compiling query expression: 
'DbSet<ManualTradingViewAlert>()
    .Where(a => a.ReceivedTime >= __parameters_FromDate_0 && a.ReceivedTime <= __parameters_ToDate_1)
    .OrderBy(a => a.ReceivedTime)'
[15:41:19 DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ManualTradingViewAlert>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ManualTradingViewAlert.Id (string) Required PK AfterSave:Throw, 0], [Property: ManualTradingViewAlert.Action (string), 1], [Property: ManualTradingViewAlert.IsExecuted (bool) Required, 2], [Property: ManualTradingViewAlert.ReceivedTime (DateTime) Required, 3], [Property: ManualTradingViewAlert.Signal (string), 4], [Property: ManualTradingViewAlert.StrategyName (string), 5], [Property: ManualTradingViewAlert.Strike (int) Required, 6], [Property: ManualTradingViewAlert.Type (string), 7] }
        SELECT m.Id, m.Action, m.IsExecuted, m.ReceivedTime, m.Signal, m.StrategyName, m.Strike, m.Type
        FROM ManualTradingViewAlerts AS m
        WHERE (m.ReceivedTime >= @__parameters_FromDate_0) && (m.ReceivedTime <= @__parameters_ToDate_1)
        ORDER BY m.ReceivedTime ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ManualTradingViewAlert.Id (string) Required PK AfterSave:Throw, 0], [Property: ManualTradingViewAlert.Action (string), 1], [Property: ManualTradingViewAlert.IsExecuted (bool) Required, 2], [Property: ManualTradingViewAlert.ReceivedTime (DateTime) Required, 3], [Property: ManualTradingViewAlert.Signal (string), 4], [Property: ManualTradingViewAlert.StrategyName (string), 5], [Property: ManualTradingViewAlert.Strike (int) Required, 6], [Property: ManualTradingViewAlert.Type (string), 7] }
        SELECT m.Id, m.Action, m.IsExecuted, m.ReceivedTime, m.Signal, m.StrategyName, m.Strike, m.Type
        FROM ManualTradingViewAlerts AS m
        WHERE (m.ReceivedTime >= @__parameters_FromDate_0) && (m.ReceivedTime <= @__parameters_ToDate_1)
        ORDER BY m.ReceivedTime ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        ManualTradingViewAlert entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            ManualTradingViewAlert instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(ManualTradingViewAlert);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: ManualTradingViewAlert.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.ManualTradingViewAlert").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetString(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (ManualTradingViewAlert)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: ManualTradingViewAlert | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.ManualTradingViewAlert")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: ManualTradingViewAlert | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.ManualTradingViewAlert")]: 
                        {
                            return 
                            {
                                ManualTradingViewAlert instance;
                                instance = new ManualTradingViewAlert();
                                instance.<Id>k__BackingField = dataReader.GetString(0);
                                instance.<Action>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<IsExecuted>k__BackingField = dataReader.GetBoolean(2);
                                instance.<ReceivedTime>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Signal>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                instance.<StrategyName>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<Strike>k__BackingField = dataReader.GetInt32(6);
                                instance.<Type>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: ManualTradingViewAlert | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("KiteConnectApi.Models.Trading.ManualTradingViewAlert")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(ManualTradingViewAlert)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: KiteConnectApi.Data.ApplicationDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
[15:41:19 DBG] Creating DbConnection.
[15:41:19 DBG] Created DbConnection. (0ms).
[15:41:19 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:19 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:19 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:19 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:19 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:19 DBG] Executing DbCommand [Parameters=[@__parameters_FromDate_0='?' (DbType = DateTime2), @__parameters_ToDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[Action], [m].[IsExecuted], [m].[ReceivedTime], [m].[Signal], [m].[StrategyName], [m].[Strike], [m].[Type]
FROM [ManualTradingViewAlerts] AS [m]
WHERE [m].[ReceivedTime] >= @__parameters_FromDate_0 AND [m].[ReceivedTime] <= @__parameters_ToDate_1
ORDER BY [m].[ReceivedTime]
Activity.TraceId:            95dc1d10caea627703c329cf917e934d
Activity.SpanId:             bcdffad34f11832f
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       ed013ea107b3dda0
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:19.0937890Z
Activity.Duration:           00:00:00.0057302
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:19 INF] Executed DbCommand (6ms) [Parameters=[@__parameters_FromDate_0='?' (DbType = DateTime2), @__parameters_ToDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[Action], [m].[IsExecuted], [m].[ReceivedTime], [m].[Signal], [m].[StrategyName], [m].[Strike], [m].[Type]
FROM [ManualTradingViewAlerts] AS [m]
WHERE [m].[ReceivedTime] >= @__parameters_FromDate_0 AND [m].[ReceivedTime] <= @__parameters_ToDate_1
ORDER BY [m].[ReceivedTime]
[15:41:19 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:19 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:19 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:19 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:41:19 INF] Found 0 historical signals for backtesting
[15:41:19 INF] Backtest completed. Total trades: 0, Win rate: 0.00 %, Total return: 0.00 %
[15:41:19 INF] Executed action method KiteConnectApi.Controllers.HistoricalBacktestingController.GetQuickAnalysisAsync (KiteConnectApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.1749ms.
[15:41:19 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[15:41:19 DBG] No information found on request to perform content negotiation.
[15:41:19 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[15:41:19 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[15:41:19 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[15:41:19 INF] Executing OkObjectResult, writing value of type 'KiteConnectApi.Services.BacktestResult'.
[15:41:19 INF] Executed action KiteConnectApi.Controllers.HistoricalBacktestingController.GetQuickAnalysisAsync (KiteConnectApi) in 12.9881ms
[15:41:19 INF] Executed endpoint 'KiteConnectApi.Controllers.HistoricalBacktestingController.GetQuickAnalysisAsync (KiteConnectApi)'
[15:41:19 DBG] Connection id "0HNE5390KP7L5" completed keep alive response.
[15:41:19 DBG] 'ApplicationDbContext' disposed.
[15:41:19 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:19 DBG] Disposed connection to database '' on server '' (0ms).
[15:41:19 INF] Request finished HTTP/1.1 GET https://localhost:7000/api/HistoricalBacktesting/quick-analysis - 200 null application/json; charset=utf-8 19.2186ms
Activity.TraceId:            95dc1d10caea627703c329cf917e934d
Activity.SpanId:             ed013ea107b3dda0
Activity.TraceFlags:         Recorded
Activity.DisplayName:        GET api/HistoricalBacktesting/quick-analysis
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:11:19.0821296Z
Activity.Duration:           00:00:00.0193926
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: GET
    url.scheme: https
    url.path: /api/HistoricalBacktesting/quick-analysis
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    http.route: api/HistoricalBacktesting/quick-analysis
    http.response.status_code: 200
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:19 DBG] Connection id "0HNE5390KP7L5" received FIN.
[15:41:19 DBG] Connection id "0HNE5390KP7L5" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:41:19 DBG] Connection id "0HNE5390KP7L5" disconnecting.
[15:41:19 DBG] Connection id "0HNE5390KP7L5" stopped.
[15:41:21 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:02:25.1452972 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:6aa73df1-cd3e-474f-9cd2-280462de3a77
Error Number:4060,State:1,Class:11
[15:41:21 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:6aa73df1-cd3e-474f-9cd2-280462de3a77
Error Number:4060,State:1,Class:11
[15:41:21 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:41:26 DBG] Connection id "0HNE5390KP7L6" accepted.
[15:41:26 DBG] Connection id "0HNE5390KP7L6" started.
[15:41:26 DBG] Connection 0HNE5390KP7L6 established using the following protocol: Tls13
[15:41:26 INF] Request starting HTTP/1.1 GET https://localhost:7000/api/HistoricalData/status - null null
[15:41:26 DBG] The request path /api/HistoricalData/status does not match a supported file type
[15:41:26 DBG] No candidates found for the request path '/api/HistoricalData/status'
[15:41:26 DBG] Request did not match any endpoints
[15:41:26 DBG] Connection id "0HNE5390KP7L6" completed keep alive response.
[15:41:26 INF] Request finished HTTP/1.1 GET https://localhost:7000/api/HistoricalData/status - 404 0 null 1.7413ms
[15:41:26 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7000/api/HistoricalData/status, Response status code: 404
Activity.TraceId:            5056e3e424bd618582bd7150759e1ab7
Activity.SpanId:             9f03346917ea13bb
Activity.TraceFlags:         Recorded
Activity.DisplayName:        GET
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:11:26.1569362Z
Activity.Duration:           00:00:00.0020788
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: GET
    url.scheme: https
    url.path: /api/HistoricalData/status
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    http.response.status_code: 404
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:26 DBG] Connection id "0HNE5390KP7L6" received FIN.
[15:41:26 DBG] Connection id "0HNE5390KP7L6" disconnecting.
[15:41:26 DBG] Connection id "0HNE5390KP7L6" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:41:26 DBG] Connection id "0HNE5390KP7L6" stopped.
[15:41:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:41:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:41:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:41:32 DBG] Connection id "0HNE5390KP7L7" accepted.
[15:41:32 DBG] Connection id "0HNE5390KP7L7" started.
[15:41:32 DBG] Connection 0HNE5390KP7L7 established using the following protocol: Tls13
[15:41:32 INF] Request starting HTTP/1.1 GET https://localhost:7000/api/HistoricalData/available-data - null null
[15:41:32 DBG] The request path /api/HistoricalData/available-data does not match a supported file type
[15:41:32 DBG] No candidates found for the request path '/api/HistoricalData/available-data'
[15:41:32 DBG] Request did not match any endpoints
[15:41:32 DBG] Connection id "0HNE5390KP7L7" completed keep alive response.
[15:41:32 INF] Request finished HTTP/1.1 GET https://localhost:7000/api/HistoricalData/available-data - 404 0 null 1.8292ms
[15:41:32 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7000/api/HistoricalData/available-data, Response status code: 404
Activity.TraceId:            1ea1a3a8019fcedee1011a1ed3ca8994
Activity.SpanId:             603d50fa752776fb
Activity.TraceFlags:         Recorded
Activity.DisplayName:        GET
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:11:32.1676072Z
Activity.Duration:           00:00:00.0021216
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: GET
    url.scheme: https
    url.path: /api/HistoricalData/available-data
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    http.response.status_code: 404
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:32 DBG] Connection id "0HNE5390KP7L7" received FIN.
[15:41:32 DBG] Connection id "0HNE5390KP7L7" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:41:32 DBG] Connection id "0HNE5390KP7L7" disconnecting.
[15:41:32 DBG] Connection id "0HNE5390KP7L7" stopped.
[15:41:36 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:02:40.1564903 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:6aa73df1-cd3e-474f-9cd2-280462de3a77
Error Number:4060,State:1,Class:11
[15:41:36 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:6aa73df1-cd3e-474f-9cd2-280462de3a77
Error Number:4060,State:1,Class:11
[15:41:36 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:41:43 DBG] Connection id "0HNE5390KP7L8" accepted.
[15:41:43 DBG] Connection id "0HNE5390KP7L8" started.
[15:41:43 DBG] Connection 0HNE5390KP7L8 established using the following protocol: Tls13
[15:41:43 INF] Request starting HTTP/1.1 GET https://localhost:7000/api/TradingView/auth-status - null null
[15:41:43 DBG] The request path /api/TradingView/auth-status does not match a supported file type
[15:41:43 DBG] No candidates found for the request path '/api/TradingView/auth-status'
[15:41:43 DBG] Request did not match any endpoints
[15:41:43 DBG] Connection id "0HNE5390KP7L8" completed keep alive response.
[15:41:43 INF] Request finished HTTP/1.1 GET https://localhost:7000/api/TradingView/auth-status - 404 0 null 0.4095ms
[15:41:43 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7000/api/TradingView/auth-status, Response status code: 404
Activity.TraceId:            0105a2e0fdd825432120730270c0d2c2
Activity.SpanId:             6dfa019a2ff51c6b
Activity.TraceFlags:         Recorded
Activity.DisplayName:        GET
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:11:43.6808096Z
Activity.Duration:           00:00:00.0005648
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: GET
    url.scheme: https
    url.path: /api/TradingView/auth-status
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    http.response.status_code: 404
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:43 DBG] Connection id "0HNE5390KP7L8" received FIN.
[15:41:43 DBG] Connection id "0HNE5390KP7L8" disconnecting.
[15:41:43 DBG] Connection id "0HNE5390KP7L8" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:41:43 DBG] Connection id "0HNE5390KP7L8" stopped.
[15:41:46 DBG] Before collection #3: memory: 31MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:41:46 DBG] After collection #3 memory: 31MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0002878
[15:41:51 DBG] Connection id "0HNE5390KP7L9" accepted.
[15:41:51 DBG] Connection id "0HNE5390KP7L9" started.
[15:41:51 DBG] Connection 0HNE5390KP7L9 established using the following protocol: Tls13
[15:41:51 INF] Request starting HTTP/1.1 POST https://localhost:7000/api/HistoricalData/fetch-real-data - application/json 203
[15:41:51 DBG] POST requests are not supported
[15:41:51 DBG] 1 candidate(s) found for the request path '/api/HistoricalData/fetch-real-data'
[15:41:51 DBG] Endpoint 'KiteConnectApi.Controllers.HistoricalDataController.FetchRealDataAsync (KiteConnectApi)' with route pattern 'api/HistoricalData/fetch-real-data' is valid for the request path '/api/HistoricalData/fetch-real-data'
[15:41:51 DBG] Request matched endpoint 'KiteConnectApi.Controllers.HistoricalDataController.FetchRealDataAsync (KiteConnectApi)'
[15:41:51 INF] Executing endpoint 'KiteConnectApi.Controllers.HistoricalDataController.FetchRealDataAsync (KiteConnectApi)'
[15:41:51 INF] Route matched with {action = "FetchRealData", controller = "HistoricalData"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[KiteConnectApi.Services.HistoricalDataFetchResult]] FetchRealDataAsync(KiteConnectApi.Controllers.RealDataFetchRequest) on controller KiteConnectApi.Controllers.HistoricalDataController (KiteConnectApi).
[15:41:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[15:41:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[15:41:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
[15:41:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[15:41:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
[15:41:51 DBG] Executing controller factory for controller KiteConnectApi.Controllers.HistoricalDataController (KiteConnectApi)
[15:41:51 DBG] Executed controller factory for controller KiteConnectApi.Controllers.HistoricalDataController (KiteConnectApi)
[15:41:51 DBG] Attempting to bind parameter 'request' of type 'KiteConnectApi.Controllers.RealDataFetchRequest' ...
[15:41:51 DBG] Attempting to bind parameter 'request' of type 'KiteConnectApi.Controllers.RealDataFetchRequest' using the name '' in request data ...
[15:41:51 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[15:41:51 DBG] Connection id "0HNE5390KP7L9", Request id "0HNE5390KP7L9:00000001": started reading request body.
[15:41:51 DBG] Connection id "0HNE5390KP7L9", Request id "0HNE5390KP7L9:00000001": done reading request body.
[15:41:51 DBG] JSON input formatter succeeded, deserializing to type 'KiteConnectApi.Controllers.RealDataFetchRequest'
[15:41:51 DBG] Done attempting to bind parameter 'request' of type 'KiteConnectApi.Controllers.RealDataFetchRequest'.
[15:41:51 DBG] Done attempting to bind parameter 'request' of type 'KiteConnectApi.Controllers.RealDataFetchRequest'.
[15:41:51 DBG] Attempting to validate the bound parameter 'request' of type 'KiteConnectApi.Controllers.RealDataFetchRequest' ...
[15:41:51 DBG] Done attempting to validate the bound parameter 'request' of type 'KiteConnectApi.Controllers.RealDataFetchRequest'.
[15:41:51 INF] Executing action method KiteConnectApi.Controllers.HistoricalDataController.FetchRealDataAsync (KiteConnectApi) - Validation state: Valid
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             7c41eadfe11ba5d9
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:51.6226133Z
Activity.Duration:           00:00:00.1653244
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/user/profile
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:51 INF] Loaded saved tokens successfully
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             8b3361cc165b21a8
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:51.8139685Z
Activity.Duration:           00:00:00.0500145
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/user/profile
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:51 INF] Fetching historical data for 7 strikes from 06/24/2024 00:00:00 to 07/15/2024 00:00:00
[15:41:51 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:02:55.1632551 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:6aa73df1-cd3e-474f-9cd2-280462de3a77
Error Number:4060,State:1,Class:11
[15:41:51 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:6aa73df1-cd3e-474f-9cd2-280462de3a77
Error Number:4060,State:1,Class:11
[15:41:51 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             66ff5af1db88c968
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:51.8686595Z
Activity.Duration:           00:00:00.0916322
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/NFO
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:52 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:41:52 DBG] Compiling query expression: 
'DbSet<OptionsHistoricalData>()
    .Count(d => d.TradingSymbol == __instrument_TradingSymbol_0 && d.Timestamp >= __8__locals1_fromDate_1 && d.Timestamp <= __8__locals1_toDate_2)'
[15:41:52 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM OptionsHistoricalData AS o
            WHERE ((o.TradingSymbol == @__instrument_TradingSymbol_0) && (o.Timestamp >= @__8__locals1_fromDate_1)) && (o.Timestamp <= @__8__locals1_toDate_2)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM OptionsHistoricalData AS o
            WHERE ((o.TradingSymbol == @__instrument_TradingSymbol_0) && (o.Timestamp >= @__8__locals1_fromDate_1)) && (o.Timestamp <= @__8__locals1_toDate_2), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: KiteConnectApi.Data.ApplicationDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
[15:41:52 DBG] Creating DbConnection.
[15:41:52 DBG] Created DbConnection. (0ms).
[15:41:52 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:52 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:52 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:52 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:52 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:52 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             41e8815e6d052320
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:52.7872987Z
Activity.Duration:           00:00:00.0079637
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:52 INF] Executed DbCommand (8ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:52 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:52 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
[15:41:52 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:52 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             31e2a24442ebe6b3
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:52.8042724Z
Activity.Duration:           00:00:00.0601967
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12132866/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:52 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:52 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:52 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:52 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:52 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:52 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             568d229be2ef2ccd
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:52.9924303Z
Activity.Duration:           00:00:00.0007323
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:52 INF] Executed DbCommand (1ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:52 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:52 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:52 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:52 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             81610f3104f6bd0b
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:52.9937208Z
Activity.Duration:           00:00:00.0671595
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12133122/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             295151c8549bb4a6
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.1656972Z
Activity.Duration:           00:00:00.0008083
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 INF] Executed DbCommand (1ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:53 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:53 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             a8141be3352e1d25
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.1671857Z
Activity.Duration:           00:00:00.0607157
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12134402/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             0b330fd7688810da
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.3323475Z
Activity.Duration:           00:00:00.0006695
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 INF] Executed DbCommand (1ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:53 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:53 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             1d7a70ab085b3deb
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.3337428Z
Activity.Duration:           00:00:00.0544857
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12134658/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             318fe4bb97617106
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.4885189Z
Activity.Duration:           00:00:00.0012751
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 INF] Executed DbCommand (2ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:53 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:53 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             1e03d2724639a473
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.4913066Z
Activity.Duration:           00:00:00.0563416
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12135938/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             8cf1ade993b62213
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.6514877Z
Activity.Duration:           00:00:00.0011551
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 INF] Executed DbCommand (2ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:53 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:53 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             a4c567eedbbc447f
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.6540584Z
Activity.Duration:           00:00:00.0538770
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12136194/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             7a3ddf55912c5682
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.8178836Z
Activity.Duration:           00:00:00.0005378
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 INF] Executed DbCommand (1ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:53 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:53 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             40014f7e7faed339
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.8189452Z
Activity.Duration:           00:00:00.0546111
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12136962/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:53 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             f341f0595a33df0c
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.9853034Z
Activity.Duration:           00:00:00.0008570
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:53 INF] Executed DbCommand (1ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:53 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:53 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:53 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             918bf254f7236f3b
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:53.9868877Z
Activity.Duration:           00:00:00.0570439
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12137218/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:54 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:54 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:54 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             8095d88312fa589f
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:54.1472207Z
Activity.Duration:           00:00:00.0004953
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 INF] Executed DbCommand (1ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:54 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:54 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             6c030e8379c495fb
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:54.1485414Z
Activity.Duration:           00:00:00.0534925
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12138242/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:54 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:54 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:54 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             faace87dc4e0ffd1
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:54.3195944Z
Activity.Duration:           00:00:00.0005738
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 INF] Executed DbCommand (1ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:54 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:54 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             2048b4722533bbfd
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:54.3207976Z
Activity.Duration:           00:00:00.0540970
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12138498/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:54 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:54 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:54 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             dae1ca31198d3443
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:54.4794172Z
Activity.Duration:           00:00:00.0008056
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 INF] Executed DbCommand (2ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:54 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:54 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             5118fa47d5b3f905
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:54.4813819Z
Activity.Duration:           00:00:00.0543014
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12139522/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:54 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:54 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:54 DBG] Executing DbCommand [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             da8a1ca81e6abfa1
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:54.6481385Z
Activity.Duration:           00:00:00.0005746
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 INF] Executed DbCommand (1ms) [Parameters=[@__instrument_TradingSymbol_0='?' (Size = 50), @__8__locals1_fromDate_1='?' (DbType = DateTime2), @__8__locals1_toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [OptionsHistoricalData] AS [o]
WHERE [o].[TradingSymbol] = @__instrument_TradingSymbol_0 AND [o].[Timestamp] >= @__8__locals1_fromDate_1 AND [o].[Timestamp] <= @__8__locals1_toDate_2
[15:41:54 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:54 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             f3934fbc1c1d9c5f
Activity.TraceFlags:         Recorded
Activity.ParentSpanId:       6c03ae730e8d0e6d
Activity.DisplayName:        GET
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:54.6494708Z
Activity.Duration:           00:00:00.0612079
Activity.Tags:
    http.request.method: GET
    server.address: api.kite.trade
    server.port: 443
    url.full: https://api.kite.trade/instruments/historical/12139778/day?*
    http.response.status_code: 200
    network.protocol.version: 1.1
Instrumentation scope (ActivitySource):
    Name: System.Net.Http
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 DBG] SaveChanges starting for 'ApplicationDbContext'.
[15:41:54 DBG] DetectChanges starting for 'ApplicationDbContext'.
[15:41:54 DBG] DetectChanges completed for 'ApplicationDbContext'.
[15:41:54 DBG] SaveChanges completed for 'ApplicationDbContext' with 0 entities written to the database.
[15:41:54 INF] Historical data fetch completed. Added 0 records
[15:41:54 INF] Executed action method KiteConnectApi.Controllers.HistoricalDataController.FetchRealDataAsync (KiteConnectApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3289.322ms.
[15:41:54 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[15:41:54 DBG] No information found on request to perform content negotiation.
[15:41:54 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[15:41:54 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[15:41:54 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[15:41:54 INF] Executing OkObjectResult, writing value of type 'KiteConnectApi.Services.HistoricalDataFetchResult'.
[15:41:54 INF] Executed action KiteConnectApi.Controllers.HistoricalDataController.FetchRealDataAsync (KiteConnectApi) in 3298.4572ms
[15:41:54 INF] Executed endpoint 'KiteConnectApi.Controllers.HistoricalDataController.FetchRealDataAsync (KiteConnectApi)'
[15:41:54 DBG] Connection id "0HNE5390KP7L9" completed keep alive response.
[15:41:54 DBG] 'ApplicationDbContext' disposed.
[15:41:54 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:54 DBG] Disposed connection to database '' on server '' (0ms).
[15:41:54 INF] Request finished HTTP/1.1 POST https://localhost:7000/api/HistoricalData/fetch-real-data - 200 null application/json; charset=utf-8 3302.0353ms
Activity.TraceId:            92d49a5f4dd2814c43b6eb34c4ac6f09
Activity.SpanId:             6c03ae730e8d0e6d
Activity.TraceFlags:         Recorded
Activity.DisplayName:        POST api/HistoricalData/fetch-real-data
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:11:51.5274882Z
Activity.Duration:           00:00:03.3021664
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: POST
    url.scheme: https
    url.path: /api/HistoricalData/fetch-real-data
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    http.route: api/HistoricalData/fetch-real-data
    http.response.status_code: 200
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:54 DBG] Connection id "0HNE5390KP7L9" received FIN.
[15:41:54 DBG] Connection id "0HNE5390KP7L9" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:41:54 DBG] Connection id "0HNE5390KP7L9" disconnecting.
[15:41:54 DBG] Connection id "0HNE5390KP7L9" stopped.
[15:41:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:41:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:41:56 DBG] 'ApplicationDbContext' disposed.
[15:41:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:41:56 INF] Order Monitoring Service running at: 07/17/2025 15:41:56 +05:30
[15:41:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:41:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:41:56 +05:30
[15:41:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:41:56 DBG] Creating DbConnection.
[15:41:56 DBG] Created DbConnection. (0ms).
[15:41:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:41:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:41:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:41:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            96f03e2329bd04baa92aaf4a7a83da18
Activity.SpanId:             2d635a1d2918eda6
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:11:56.7462738Z
Activity.Duration:           00:00:00.0033969
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:41:56 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:41:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:41:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:41:56 DBG] 'ApplicationDbContext' disposed.
[15:41:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:41:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:42:02 DBG] Connection id "0HNE5390KP7LA" accepted.
[15:42:02 DBG] Connection id "0HNE5390KP7LA" started.
[15:42:02 DBG] Connection 0HNE5390KP7LA established using the following protocol: Tls13
[15:42:02 INF] Request starting HTTP/1.1 POST https://localhost:7000/api/HistoricalData/add-sample-signals - application/json 163
[15:42:02 DBG] POST requests are not supported
[15:42:02 DBG] No candidates found for the request path '/api/HistoricalData/add-sample-signals'
[15:42:02 DBG] Request did not match any endpoints
[15:42:02 DBG] Connection id "0HNE5390KP7LA" completed keep alive response.
[15:42:02 INF] Request finished HTTP/1.1 POST https://localhost:7000/api/HistoricalData/add-sample-signals - 404 0 null 0.2576ms
[15:42:02 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7000/api/HistoricalData/add-sample-signals, Response status code: 404
Activity.TraceId:            54c1fd497a22b995a974e36901b58efc
Activity.SpanId:             1f07128da8b1ada8
Activity.TraceFlags:         Recorded
Activity.DisplayName:        POST
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:12:02.1680624Z
Activity.Duration:           00:00:00.0003697
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: POST
    url.scheme: https
    url.path: /api/HistoricalData/add-sample-signals
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    http.response.status_code: 404
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:42:02 DBG] Connection id "0HNE5390KP7LA", Request id "0HNE5390KP7LA:00000001": started reading request body.
[15:42:02 DBG] Connection id "0HNE5390KP7LA", Request id "0HNE5390KP7LA:00000001": done reading request body.
[15:42:02 DBG] Connection id "0HNE5390KP7LA" disconnecting.
[15:42:02 DBG] Connection id "0HNE5390KP7LA" stopped.
[15:42:02 DBG] Connection id "0HNE5390KP7LA" received FIN.
[15:42:02 DBG] Connection id "0HNE5390KP7LA" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:42:06 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:03:10.1677976 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:6aa73df1-cd3e-474f-9cd2-280462de3a77
Error Number:4060,State:1,Class:11
[15:42:06 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:6aa73df1-cd3e-474f-9cd2-280462de3a77
Error Number:4060,State:1,Class:11
[15:42:06 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:42:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:42:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:42:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:42:31 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:03:35.2010247 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:66af98e6-2fcd-46b4-b30f-f57f13f45625
Error Number:4060,State:1,Class:11
[15:42:31 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:66af98e6-2fcd-46b4-b30f-f57f13f45625
Error Number:4060,State:1,Class:11
[15:42:31 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:42:46 DBG] Before collection #4: memory: 37MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:42:46 DBG] After collection #4 memory: 37MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0003947
[15:42:46 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:03:50.2143216 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:66af98e6-2fcd-46b4-b30f-f57f13f45625
Error Number:4060,State:1,Class:11
[15:42:46 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:66af98e6-2fcd-46b4-b30f-f57f13f45625
Error Number:4060,State:1,Class:11
[15:42:46 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:42:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:42:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:42:56 DBG] 'ApplicationDbContext' disposed.
[15:42:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:42:56 INF] Order Monitoring Service running at: 07/17/2025 15:42:56 +05:30
[15:42:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:42:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:42:56 +05:30
[15:42:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:42:56 DBG] Creating DbConnection.
[15:42:56 DBG] Created DbConnection. (0ms).
[15:42:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:42:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:42:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:42:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:42:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:42:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            cba22c7d10563ce27f580aea1abf01fd
Activity.SpanId:             7334d3e176fbd722
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:12:56.7586360Z
Activity.Duration:           00:00:00.0029408
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:42:56 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:42:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:42:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:42:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:42:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:42:56 DBG] 'ApplicationDbContext' disposed.
[15:42:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:42:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:43:01 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:04:05.2310650 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:66af98e6-2fcd-46b4-b30f-f57f13f45625
Error Number:4060,State:1,Class:11
[15:43:01 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:66af98e6-2fcd-46b4-b30f-f57f13f45625
Error Number:4060,State:1,Class:11
[15:43:01 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:43:11 DBG] HttpMessageHandler expired after 120000ms for client 'MarketSentimentAnalyzer'
[15:43:16 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:04:20.2355318 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:66af98e6-2fcd-46b4-b30f-f57f13f45625
Error Number:4060,State:1,Class:11
[15:43:16 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:66af98e6-2fcd-46b4-b30f-f57f13f45625
Error Number:4060,State:1,Class:11
[15:43:16 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:43:21 DBG] Starting HttpMessageHandler cleanup cycle with 1 items
[15:43:21 DBG] Ending HttpMessageHandler cleanup cycle after 0.13ms - processed: 0 items - remaining: 1 items
[15:43:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:43:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:43:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:43:31 DBG] Starting HttpMessageHandler cleanup cycle with 1 items
[15:43:31 DBG] Ending HttpMessageHandler cleanup cycle after 0.0073ms - processed: 0 items - remaining: 1 items
[15:43:41 DBG] Starting HttpMessageHandler cleanup cycle with 1 items
[15:43:41 DBG] Ending HttpMessageHandler cleanup cycle after 0.0089ms - processed: 0 items - remaining: 1 items
[15:43:41 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:04:45.2706830 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:9331b7cf-7961-42f1-9a2d-52270097d391
Error Number:4060,State:1,Class:11
[15:43:41 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:9331b7cf-7961-42f1-9a2d-52270097d391
Error Number:4060,State:1,Class:11
[15:43:42 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:43:46 DBG] Before collection #5: memory: 27MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:43:46 DBG] After collection #5 memory: 27MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0001392
[15:43:51 DBG] Starting HttpMessageHandler cleanup cycle with 1 items
[15:43:51 DBG] Ending HttpMessageHandler cleanup cycle after 0.6133ms - processed: 1 items - remaining: 0 items
[15:43:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:43:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:43:56 DBG] 'ApplicationDbContext' disposed.
[15:43:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:43:56 INF] Order Monitoring Service running at: 07/17/2025 15:43:56 +05:30
[15:43:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:43:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:43:56 +05:30
[15:43:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:43:56 DBG] Creating DbConnection.
[15:43:56 DBG] Created DbConnection. (0ms).
[15:43:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:43:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:43:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:43:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:43:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:43:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            a1a1fc4b1829b17a6884141add08a692
Activity.SpanId:             8590f2c4682b2a8b
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:13:56.7647090Z
Activity.Duration:           00:00:00.0022903
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:43:56 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:43:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:43:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:43:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:43:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:43:56 DBG] 'ApplicationDbContext' disposed.
[15:43:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:43:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:43:57 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:05:00.3141224 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:9331b7cf-7961-42f1-9a2d-52270097d391
Error Number:4060,State:1,Class:11
[15:43:57 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:9331b7cf-7961-42f1-9a2d-52270097d391
Error Number:4060,State:1,Class:11
[15:43:57 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:44:12 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:05:15.3186546 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:9331b7cf-7961-42f1-9a2d-52270097d391
Error Number:4060,State:1,Class:11
[15:44:12 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:9331b7cf-7961-42f1-9a2d-52270097d391
Error Number:4060,State:1,Class:11
[15:44:12 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:44:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:44:27 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:05:30.3336445 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:9331b7cf-7961-42f1-9a2d-52270097d391
Error Number:4060,State:1,Class:11
[15:44:27 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:9331b7cf-7961-42f1-9a2d-52270097d391
Error Number:4060,State:1,Class:11
[15:44:27 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:44:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:44:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:44:46 DBG] Before collection #6: memory: 30MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:44:46 DBG] After collection #6 memory: 30MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0004423
[15:44:52 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:05:55.3608463 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:cb21f14c-11c7-4e92-963a-d44ba19cc366
Error Number:4060,State:1,Class:11
[15:44:52 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:cb21f14c-11c7-4e92-963a-d44ba19cc366
Error Number:4060,State:1,Class:11
[15:44:52 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:44:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:44:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:44:56 DBG] 'ApplicationDbContext' disposed.
[15:44:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:44:56 INF] Order Monitoring Service running at: 07/17/2025 15:44:56 +05:30
[15:44:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:44:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:44:56 +05:30
[15:44:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:44:56 DBG] Creating DbConnection.
[15:44:56 DBG] Created DbConnection. (0ms).
[15:44:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:44:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:44:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:44:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:44:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:44:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            c5066778a960906d9dd859d61e2ad2dc
Activity.SpanId:             88b075fdc20c978d
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:14:56.7849315Z
Activity.Duration:           00:00:00.0034668
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:44:56 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:44:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:44:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:44:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:44:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:44:56 DBG] 'ApplicationDbContext' disposed.
[15:44:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:44:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:45:17 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:06:20.3922002 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:b889c527-4c8a-4373-9c00-89a9b47f6b80
Error Number:4060,State:1,Class:11
[15:45:17 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:b889c527-4c8a-4373-9c00-89a9b47f6b80
Error Number:4060,State:1,Class:11
[15:45:17 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:45:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:45:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:45:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:45:42 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:06:45.4204286 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:059d5309-419a-4076-948a-6ccd5e3c7b8c
Error Number:4060,State:1,Class:11
[15:45:42 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:059d5309-419a-4076-948a-6ccd5e3c7b8c
Error Number:4060,State:1,Class:11
[15:45:42 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:45:46 DBG] Before collection #7: memory: 34MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:45:46 DBG] After collection #7 memory: 34MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0001782
[15:45:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:45:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:45:56 DBG] 'ApplicationDbContext' disposed.
[15:45:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:45:56 INF] Order Monitoring Service running at: 07/17/2025 15:45:56 +05:30
[15:45:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:45:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:45:56 +05:30
[15:45:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:45:56 DBG] Creating DbConnection.
[15:45:56 DBG] Created DbConnection. (0ms).
[15:45:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:45:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:45:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:45:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:45:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:45:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            9984af9b21fbdb7f64f176cd0198c5b6
Activity.SpanId:             a7479d59bc6379df
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:15:56.7963896Z
Activity.Duration:           00:00:00.0029598
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:45:56 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:45:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:45:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:45:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:45:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:45:56 DBG] 'ApplicationDbContext' disposed.
[15:45:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:45:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:46:07 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:07:10.4543144 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:72297f49-e285-4196-b647-fba254c271ac
Error Number:4060,State:1,Class:11
[15:46:07 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:72297f49-e285-4196-b647-fba254c271ac
Error Number:4060,State:1,Class:11
[15:46:07 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:46:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:46:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:46:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:46:32 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:07:35.4844708 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:41ade701-32f1-4ad3-a373-4e5dd2003651
Error Number:4060,State:1,Class:11
[15:46:32 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:41ade701-32f1-4ad3-a373-4e5dd2003651
Error Number:4060,State:1,Class:11
[15:46:32 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:46:46 DBG] Before collection #8: memory: 38MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:46:46 DBG] After collection #8 memory: 38MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0004130
[15:46:47 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:07:50.4979404 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:41ade701-32f1-4ad3-a373-4e5dd2003651
Error Number:4060,State:1,Class:11
[15:46:47 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:41ade701-32f1-4ad3-a373-4e5dd2003651
Error Number:4060,State:1,Class:11
[15:46:47 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:46:56 INF] Order Monitoring Service running at: 07/17/2025 15:46:56 +05:30
[15:46:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:46:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:46:56 DBG] 'ApplicationDbContext' disposed.
[15:46:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:46:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:46:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:46:56 +05:30
[15:46:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:46:56 DBG] Creating DbConnection.
[15:46:56 DBG] Created DbConnection. (0ms).
[15:46:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:46:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:46:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:46:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:46:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:46:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            b40f1a19a6ee631083729caf5c6dbc79
Activity.SpanId:             6bc89d67b17af1ee
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:16:56.8042296Z
Activity.Duration:           00:00:00.0023186
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:46:56 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:46:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:46:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:46:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:46:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:46:56 DBG] 'ApplicationDbContext' disposed.
[15:46:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:46:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:47:12 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:08:15.5333096 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:f80b867b-e5a9-4a85-962c-47021c937d80
Error Number:4060,State:1,Class:11
[15:47:12 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:f80b867b-e5a9-4a85-962c-47021c937d80
Error Number:4060,State:1,Class:11
[15:47:12 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:47:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:47:27 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:08:30.5435408 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:f80b867b-e5a9-4a85-962c-47021c937d80
Error Number:4060,State:1,Class:11
[15:47:27 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:f80b867b-e5a9-4a85-962c-47021c937d80
Error Number:4060,State:1,Class:11
[15:47:27 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:47:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:47:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:47:42 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:08:45.5465391 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:f80b867b-e5a9-4a85-962c-47021c937d80
Error Number:4060,State:1,Class:11
[15:47:42 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:f80b867b-e5a9-4a85-962c-47021c937d80
Error Number:4060,State:1,Class:11
[15:47:42 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:47:46 DBG] Before collection #9: memory: 41MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:47:46 DBG] After collection #9 memory: 41MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0003045
[15:47:56 INF] Order Monitoring Service running at: 07/17/2025 15:47:56 +05:30
[15:47:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:47:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:47:56 DBG] 'ApplicationDbContext' disposed.
[15:47:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:47:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:47:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:47:56 +05:30
[15:47:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:47:56 DBG] Creating DbConnection.
[15:47:56 DBG] Created DbConnection. (0ms).
[15:47:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:47:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:47:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:47:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:47:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:47:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            3b87afb9281b3db62002ca8f200059c8
Activity.SpanId:             35572acd9271f590
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:17:56.8220804Z
Activity.Duration:           00:00:00.0031779
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:47:56 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:47:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:47:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:47:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:47:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:47:56 DBG] 'ApplicationDbContext' disposed.
[15:47:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:47:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:48:07 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:09:10.5743676 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:4593a6d6-6ea8-4884-a787-6ebd52ec0fed
Error Number:4060,State:1,Class:11
[15:48:07 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:4593a6d6-6ea8-4884-a787-6ebd52ec0fed
Error Number:4060,State:1,Class:11
[15:48:07 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:48:22 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:09:25.5777390 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:4593a6d6-6ea8-4884-a787-6ebd52ec0fed
Error Number:4060,State:1,Class:11
[15:48:22 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:4593a6d6-6ea8-4884-a787-6ebd52ec0fed
Error Number:4060,State:1,Class:11
[15:48:22 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:48:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:48:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:48:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:48:37 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:09:40.5969469 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:4593a6d6-6ea8-4884-a787-6ebd52ec0fed
Error Number:4060,State:1,Class:11
[15:48:37 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:4593a6d6-6ea8-4884-a787-6ebd52ec0fed
Error Number:4060,State:1,Class:11
[15:48:37 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:48:46 DBG] Before collection #10: memory: 45MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:48:46 DBG] After collection #10 memory: 45MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0002734
[15:48:52 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:09:55.5998614 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:4593a6d6-6ea8-4884-a787-6ebd52ec0fed
Error Number:4060,State:1,Class:11
[15:48:52 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:4593a6d6-6ea8-4884-a787-6ebd52ec0fed
Error Number:4060,State:1,Class:11
[15:48:52 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:48:56 INF] Order Monitoring Service running at: 07/17/2025 15:48:56 +05:30
[15:48:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:48:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:48:56 DBG] 'ApplicationDbContext' disposed.
[15:48:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:48:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:48:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:48:56 +05:30
[15:48:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:48:56 DBG] Creating DbConnection.
[15:48:56 DBG] Created DbConnection. (0ms).
[15:48:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:48:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:48:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:48:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:48:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:48:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            f038ca26b8874b00abdbb9ed2a97141a
Activity.SpanId:             f66f5ca361a0e6c6
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:18:56.8334695Z
Activity.Duration:           00:00:00.0005700
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:48:56 INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:48:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:48:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:48:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:48:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:48:56 DBG] 'ApplicationDbContext' disposed.
[15:48:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:48:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:49:17 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:10:20.6427102 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:2bceacb6-bc91-4091-a492-a2dc1a8db225
Error Number:4060,State:1,Class:11
[15:49:17 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:2bceacb6-bc91-4091-a492-a2dc1a8db225
Error Number:4060,State:1,Class:11
[15:49:17 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:49:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:49:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:49:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:49:42 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:10:45.6743053 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:91b428a6-0e70-4455-8818-8f880596fffe
Error Number:4060,State:1,Class:11
[15:49:42 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:91b428a6-0e70-4455-8818-8f880596fffe
Error Number:4060,State:1,Class:11
[15:49:42 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:49:46 DBG] Before collection #11: memory: 49MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:49:46 DBG] After collection #11 memory: 49MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0001668
[15:49:56 INF] Order Monitoring Service running at: 07/17/2025 15:49:56 +05:30
[15:49:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:49:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:49:56 DBG] 'ApplicationDbContext' disposed.
[15:49:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:49:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:49:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:49:56 +05:30
[15:49:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:49:56 DBG] Creating DbConnection.
[15:49:56 DBG] Created DbConnection. (0ms).
[15:49:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:49:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:49:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:49:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:49:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:49:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            ca79493ce5597c78b124f5fdb9a9bdb1
Activity.SpanId:             936b74d2dac3318e
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:19:56.8452208Z
Activity.Duration:           00:00:00.0006393
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:49:56 INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:49:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:49:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:49:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:49:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:49:56 DBG] 'ApplicationDbContext' disposed.
[15:49:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:49:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:50:07 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:11:10.6916780 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:8ba17511-3de1-49d0-a25b-3839fd1911e2
Error Number:4060,State:1,Class:11
[15:50:07 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:8ba17511-3de1-49d0-a25b-3839fd1911e2
Error Number:4060,State:1,Class:11
[15:50:07 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:50:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:50:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:50:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:50:32 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:11:35.7165403 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:3b6d2e96-9df6-4937-97ef-98f7dc7ed58e
Error Number:4060,State:1,Class:11
[15:50:32 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:3b6d2e96-9df6-4937-97ef-98f7dc7ed58e
Error Number:4060,State:1,Class:11
[15:50:32 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:50:46 DBG] Before collection #12: memory: 52MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:50:46 DBG] After collection #12 memory: 52MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0003914
[15:50:47 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:11:50.7216928 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:3b6d2e96-9df6-4937-97ef-98f7dc7ed58e
Error Number:4060,State:1,Class:11
[15:50:47 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:3b6d2e96-9df6-4937-97ef-98f7dc7ed58e
Error Number:4060,State:1,Class:11
[15:50:47 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:50:56 INF] Order Monitoring Service running at: 07/17/2025 15:50:56 +05:30
[15:50:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:50:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:50:56 DBG] 'ApplicationDbContext' disposed.
[15:50:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:50:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:50:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:50:56 +05:30
[15:50:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:50:56 DBG] Creating DbConnection.
[15:50:56 DBG] Created DbConnection. (0ms).
[15:50:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:50:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:50:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:50:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:50:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:50:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            5846dafeded79e023aca5c8c0161c6f4
Activity.SpanId:             5e14d15ce8258eb0
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:20:56.8575934Z
Activity.Duration:           00:00:00.0028686
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:50:56 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:50:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:50:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:50:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:50:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:50:56 DBG] 'ApplicationDbContext' disposed.
[15:50:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:50:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:51:12 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:12:15.7467251 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:63351cf8-e35a-4dc8-9600-c8cd06296ca3
Error Number:4060,State:1,Class:11
[15:51:12 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:63351cf8-e35a-4dc8-9600-c8cd06296ca3
Error Number:4060,State:1,Class:11
[15:51:12 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:51:26 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:51:27 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:12:30.7612734 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:63351cf8-e35a-4dc8-9600-c8cd06296ca3
Error Number:4060,State:1,Class:11
[15:51:27 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:63351cf8-e35a-4dc8-9600-c8cd06296ca3
Error Number:4060,State:1,Class:11
[15:51:27 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:51:30 DBG] ProcessTableUpdate (called from Refresh) membership table 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:51:30 DBG] ProcessTableUpdate (called from Refresh) membership table: 1 silos, 1 are Active, 0 are Dead, Version=<2, 4>. All silos: [SiloAddress=S127.0.0.1:11111:111751726 SiloName=Silo_3beea Status=Active]
[15:51:31 DBG] Connection id "0HNE5390KP7LB" accepted.
[15:51:31 DBG] Connection id "0HNE5390KP7LB" started.
[15:51:31 DBG] Connection 0HNE5390KP7LB established using the following protocol: Tls13
[15:51:31 INF] Request starting HTTP/1.1 POST https://localhost:7000/api/IndicatorBacktest/quick-backtest - application/json null
[15:51:31 DBG] POST requests are not supported
[15:51:31 DBG] No candidates found for the request path '/api/IndicatorBacktest/quick-backtest'
[15:51:31 DBG] Request did not match any endpoints
[15:51:31 DBG] Connection id "0HNE5390KP7LB" completed keep alive response.
[15:51:31 INF] Request finished HTTP/1.1 POST https://localhost:7000/api/IndicatorBacktest/quick-backtest - 404 0 null 1.0926ms
[15:51:31 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7000/api/IndicatorBacktest/quick-backtest, Response status code: 404
Activity.TraceId:            382276265ec31e7ae344da1433b97ec8
Activity.SpanId:             b37472125b5d7055
Activity.TraceFlags:         Recorded
Activity.DisplayName:        POST
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:21:31.2602918Z
Activity.Duration:           00:00:00.0015049
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: POST
    url.scheme: https
    url.path: /api/IndicatorBacktest/quick-backtest
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    http.response.status_code: 404
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:51:31 DBG] Connection id "0HNE5390KP7LB" received FIN.
[15:51:31 DBG] Connection id "0HNE5390KP7LB" disconnecting.
[15:51:31 DBG] Connection id "0HNE5390KP7LB" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:51:31 DBG] Connection id "0HNE5390KP7LB" stopped.
[15:51:39 DBG] Connection id "0HNE5390KP7LC" accepted.
[15:51:39 DBG] Connection id "0HNE5390KP7LC" started.
[15:51:39 DBG] Connection 0HNE5390KP7LC established using the following protocol: Tls13
[15:51:39 INF] Request starting HTTP/1.1 GET https://localhost:7000/api/ApiTradingDashboard/current-signals - application/json null
[15:51:39 DBG] The request path /api/ApiTradingDashboard/current-signals does not match a supported file type
[15:51:39 DBG] 1 candidate(s) found for the request path '/api/ApiTradingDashboard/current-signals'
[15:51:39 DBG] Endpoint 'KiteConnectApi.Controllers.ApiTradingDashboardController.GetCurrentSignalsAsync (KiteConnectApi)' with route pattern 'api/ApiTradingDashboard/current-signals' is valid for the request path '/api/ApiTradingDashboard/current-signals'
[15:51:39 DBG] Request matched endpoint 'KiteConnectApi.Controllers.ApiTradingDashboardController.GetCurrentSignalsAsync (KiteConnectApi)'
[15:51:39 INF] Executing endpoint 'KiteConnectApi.Controllers.ApiTradingDashboardController.GetCurrentSignalsAsync (KiteConnectApi)'
[15:51:39 INF] Route matched with {action = "GetCurrentSignals", controller = "ApiTradingDashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[KiteConnectApi.Models.Trading.ApiAlertDetails]]] GetCurrentSignalsAsync() on controller KiteConnectApi.Controllers.ApiTradingDashboardController (KiteConnectApi).
[15:51:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[15:51:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[15:51:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
[15:51:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[15:51:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
[15:51:39 DBG] Executing controller factory for controller KiteConnectApi.Controllers.ApiTradingDashboardController (KiteConnectApi)
[15:51:39 INF] Executed action KiteConnectApi.Controllers.ApiTradingDashboardController.GetCurrentSignalsAsync (KiteConnectApi) in 0.9694ms
[15:51:39 INF] Executed endpoint 'KiteConnectApi.Controllers.ApiTradingDashboardController.GetCurrentSignalsAsync (KiteConnectApi)'
[15:51:39 ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'KiteConnectApi.Services.ApiTradingDashboardService' while attempting to activate 'KiteConnectApi.Controllers.ApiTradingDashboardController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method150(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[15:51:39 DBG] Connection id "0HNE5390KP7LC" completed keep alive response.
[15:51:39 INF] Request finished HTTP/1.1 GET https://localhost:7000/api/ApiTradingDashboard/current-signals - 500 null text/plain; charset=utf-8 13.5366ms
Activity.TraceId:            eb67f0136e90247c1dcd34511d1a6e16
Activity.SpanId:             b863dd2c72ce188a
Activity.TraceFlags:         Recorded
Activity.DisplayName:        GET api/ApiTradingDashboard/current-signals
Activity.Kind:               Server
Activity.StartTime:          2025-07-17T10:21:39.8269324Z
Activity.Duration:           00:00:00.0137086
Activity.Tags:
    server.address: localhost
    server.port: 7000
    http.request.method: GET
    url.scheme: https
    url.path: /api/ApiTradingDashboard/current-signals
    network.protocol.version: 1.1
    user_agent.original: curl/8.12.1
    error.type: System.InvalidOperationException
    http.route: api/ApiTradingDashboard/current-signals
    http.response.status_code: 500
StatusCode: Error
Instrumentation scope (ActivitySource):
    Name: Microsoft.AspNetCore
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:51:39 DBG] Connection id "0HNE5390KP7LC" disconnecting.
[15:51:39 DBG] Connection id "0HNE5390KP7LC" received FIN.
[15:51:39 DBG] Connection id "0HNE5390KP7LC" stopped.
[15:51:39 DBG] Connection id "0HNE5390KP7LC" sending FIN because: "The Socket transport's send loop completed gracefully."
[15:51:42 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:12:45.7644886 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:63351cf8-e35a-4dc8-9600-c8cd06296ca3
Error Number:4060,State:1,Class:11
[15:51:42 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:63351cf8-e35a-4dc8-9600-c8cd06296ca3
Error Number:4060,State:1,Class:11
[15:51:42 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
[15:51:46 DBG] Before collection #13: memory: 56MB, #activations: 0, collector: <#Activations=0, #Buckets=0, buckets=[]>
[15:51:46 DBG] After collection #13 memory: 56MB, #activations: 0, collected 0 activations, collector: <#Activations=0, #Buckets=0, buckets=[]>, collection time: 00:00:00.0001615
[15:51:56 INF] Order Monitoring Service running at: 07/17/2025 15:51:56 +05:30
[15:51:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:51:56 DBG] Compiling query expression: 
'DbSet<OptionsTradePosition>()
    .Where(p => p.Status == "OPEN" && p.ExpiryDate.Date == __today_0)
    .Include(p => p.MainPositionId != null ? DbSet<OptionsTradePosition>()
        .Where(h => h.Id == p.MainPositionId)
        .FirstOrDefault() : null)'
[15:51:56 DBG] 'ApplicationDbContext' disposed.
[15:51:56 ERR] Error in ExpirySquareOffService
System.InvalidOperationException: The expression 'IIF((p.MainPositionId != null), [Microsoft.EntityFrameworkCore.Query.EntityQueryRootExpression].Where(h => (h.Id == p.MainPositionId)).FirstOrDefault(), null)' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.<ProcessInclude>g__ExtractIncludeFilter|33_0(Expression currentExpression, Expression includeExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at KiteConnectApi.Services.ExpirySquareOffService.ProcessExpirySquareOffAsync() in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 61
   at KiteConnectApi.Services.ExpirySquareOffService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\E1791\KiteApp\Kite\Services\ExpirySquareOffService.cs:line 30
[15:51:56 DBG] UpdateIAmAlive entry = SiloAddress=S127.0.0.1:11111:111751726 SiloName= Status=None
[15:51:56 INF] Trading Strategy Monitor running at: 07/17/2025 15:51:56 +05:30
[15:51:56 DBG] Entity Framework Core 9.0.6 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
[15:51:56 DBG] Creating DbConnection.
[15:51:56 DBG] Created DbConnection. (0ms).
[15:51:56 DBG] Opening connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:51:56 DBG] Opened connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:51:56 DBG] Creating DbCommand for 'ExecuteReader'.
[15:51:56 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[15:51:56 DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
[15:51:56 DBG] Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
Activity.TraceId:            bd43ed13c0ae61c69ee7d9d6e3329bd3
Activity.SpanId:             f7b6afc89998febd
Activity.TraceFlags:         Recorded
Activity.DisplayName:        KiteConnectApi
Activity.Kind:               Client
Activity.StartTime:          2025-07-17T10:21:56.8664396Z
Activity.Duration:           00:00:00.0024687
Activity.Tags:
    db.system: mssql
    db.name: KiteConnectApi
    server.address: (localdb)
    db.mssql.instance_name: mssqllocaldb
Instrumentation scope (ActivitySource):
    Name: OpenTelemetry.Instrumentation.SqlClient
    Version: 1.12.0-beta.1
Resource associated with Activity:
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.12.0
    service.name: unknown_service:KiteConnectApi

[15:51:56 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [n].[Id], [n].[AllocatedMargin], [n].[AllowMultipleSignals], [n].[AllowedSignals], [n].[AutoSquareOffOnExpiry], [n].[CreatedBy], [n].[CreatedTime], [n].[EntryLimitPrice], [n].[EntryOrderType], [n].[EntryTime], [n].[Exchange], [n].[ExecutionMode], [n].[ExitAndReenterProfitAmount], [n].[ExitAndReenterProfitPercentage], [n].[ExitTime], [n].[ExpirySquareOffTimeMinutes], [n].[FromDate], [n].[HedgeDistancePoints], [n].[HedgeEnabled], [n].[HedgePremiumPercentage], [n].[HedgeRatio], [n].[HedgeType], [n].[InstrumentPrefix], [n].[IsDeleted], [n].[IsEnabled], [n].[LastExitReentryTime], [n].[LastUpdated], [n].[LastUpdatedBy], [n].[LockProfitAmount], [n].[LockProfitPercentage], [n].[ManualExecutionTimeoutMinutes], [n].[MaxDailyLoss], [n].[MaxPositionSize], [n].[MaxTradesPerDay], [n].[MinReentryDelayMinutes], [n].[MoveStopLossToEntryPriceAmount], [n].[MoveStopLossToEntryPricePercentage], [n].[Notes], [n].[NotifyOnEntry], [n].[NotifyOnExit], [n].[NotifyOnProfit], [n].[NotifyOnStopLoss], [n].[OrderType], [n].[OverallPositionStopLoss], [n].[ProductType], [n].[Quantity], [n].[StopLossPercentage], [n].[StrategyName], [n].[TakeProfitPercentage], [n].[TargetPercentage], [n].[ToDate], [n].[TrailStopLossAmount], [n].[TrailStopLossPercentage], [n].[UnderlyingInstrument], [n].[UseDynamicQuantity], [n].[UseNearestWeeklyExpiry], [n].[UseOrderProtection]
FROM [NiftyOptionStrategyConfigs] AS [n]
[15:51:56 DBG] Closing data reader to 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:51:56 DBG] A data reader for 'KiteConnectApi' on server '(localdb)\mssqllocaldb' is being disposed after spending 0ms reading results.
[15:51:56 DBG] Closing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:51:56 DBG] Closed connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb' (0ms).
[15:51:56 DBG] 'ApplicationDbContext' disposed.
[15:51:56 DBG] Disposing connection to database 'KiteConnectApi' on server '(localdb)\mssqllocaldb'.
[15:51:56 DBG] Disposed connection to database '' on server '' (0ms).
[15:52:07 ERR] Execution BackgroundServerProcess is still in the Failed state for 00:13:10.8105544 due to an exception, will be retried in no more than 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:add9bddd-adc0-4bb0-b036-40cb354f1792
Error Number:4060,State:1,Class:11
[15:52:07 DBG] Execution loop BackgroundServerProcess:87bee2bd caught an exception and will be retried in 00:00:15
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "HangfireDB" requested by the login. The login failed.
Login failed for user 'THEMEPROTECH\E1791'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Hangfire.SqlServer.SqlServerStorage.CreateAndOpenConnection() in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 406
   at Hangfire.SqlServer.SqlServerStorage.UseConnection[TContext,TResult](DbConnection dedicatedConnection, Func`4 func, TContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerStorage.cs:line 291
   at Hangfire.SqlServer.SqlServerConnection.AnnounceServer(String serverId, ServerContext context) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 512
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 209
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:add9bddd-adc0-4bb0-b036-40cb354f1792
Error Number:4060,State:1,Class:11
[15:52:07 DBG] Execution loop BackgroundServerProcess:87bee2bd will be retried in 00:00:15...
